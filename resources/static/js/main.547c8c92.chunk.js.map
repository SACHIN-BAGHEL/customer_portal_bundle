{"version":3,"sources":["i18n.js","api/constants.js","api/helpers.js","api/ticketingsystem.js","auth/KeycloakContext.js","components/__types__/ref.js","auth/withKeycloak.js","components/Admin/Configuration/TicketingSystem.js","api/productVersion.js","components/Admin/AddProductVersionModal.js","components/Admin/EditVersionModal.js","components/Admin/Configuration/ProductVersion.js","components/Breadcrumbs/Breadcrumbs.js","components/Admin/Configuration/AdminConfiguration.js","helpers/widgetEvents.js","custom-elements/widgetEventTypes.js","custom-elements/AdminConfigurationElement.js","api/customers.js","components/Admin/AddCustomerModal.js","api/partners.js","api/projects.js","auth/KeycloakViews.js","components/Admin/AddPartnerModal.js","components/Admin/EditProjectModal.js","components/Admin/ManagePartnersModal.js","components/Admin/ProjectActionItems.js","api/subscriptions.js","components/Customer/CustomerDataTable.js","components/Customer/CustomerDetails.js","components/Buttons/ButtonBody.js","helpers/icons.js","components/Admin/EditCustomerModal.js","components/Admin/AddProjectModal.js","components/Buttons/GhostButton.js","components/Customer/CustomerAccordian.js","components/Admin/AdminDashboard.js","api/tickets.js","components/SubscriptionDetails/TicketList.js","components/SubscriptionDetails/Subscription.js","components/Customer/CustomerProjectList.js","components/Admin/ManageSubscriptions/ManageSubscriptions.js","components/Forms/SubscriptionForm.js","components/Forms/OpenTicketForm.js","api/portalusers.js","api/keycloak.js","components/Admin/ManageUsers/AssignUsers.js","components/Admin/ManageUsers/DeleteUsers.js","components/Admin/ManageUsers/ManageUsers.js","components/App.js","custom-elements/AppElement.js","components/Login/Login.js","custom-elements/LoginElement.js","local/LocalApp.js","local/LocalAppElement.js"],"names":["i18n","defaultLocale","locale","fallbacks","translations","en","it","setLocale","PAGE_CUSTOMER_PORTAL","PAGE_ADMIN_CONFIG","getKeycloakToken","window","entando","keycloak","authenticated","token","isAuthenticated","props","initialized","authenticationChanged","prevProps","changedAuth","isPortalAdmin","hasKeycloakClientRole","isPortalSupport","isPortalPartner","isPortalCustomer","isPortalAdminOrSupport","isPortalUser","clientRole","resourceAccess","client","item","roles","includes","getDefaultOptions","headers","Headers","Authorization","getDefaultKeycloakOptions","getActiveSubscription","project","projectSubscriptions","find","status","getPageUrl","pageCode","url","getUrl","console","log","request","options","a","fetch","response","has","parseInt","get","data","json","Promise","reject","Error","statusText","resource","apiTicketingSystemDelete","serviceUrl","id","method","apiCurrentTicketingSystemGet","currentTicketingSystem","apiTicketingSystemsGet","ticketingSystems","length","apiTicketingSystemPost","ticketingSystem","secret","tsRequest","body","JSON","stringify","apiTicketingSystemPut","KeycloakContext","PropTypes","oneOfType","func","shape","current","elementType","React","createContext","withKeycloak","WrappedComponent","WithKeycloakComponent","renderWrappedComponent","value","forwardedRef","rest","ref","Consumer","this","Component","defaultProps","forwardRef","handleChanges","e","input","target","name","setState","handleFormSubmit","event","preventDefault","state","updateTicketingSystem","then","submitMsg","t","submitColour","catch","createTicketingSystem","ticketingSystemType","serviceAccount","serviceAccountSecret","systemId","fetchData","confirm","deleteTicketingSystem","className","style","color","Form","onSubmit","Select","labelText","onChange","SelectItem","text","map","type","i","TextInput","Button","kind","tabIndex","onClick","handleDelete","apiProductVersionsGet","apiProductVersionGet","versionId","apiUpdateProductVersionsStatus","apiProductVersionPost","productVersion","apiProductVersionPut","apiProductVersionDelete","handleValidation","addProductVersion","updateProductVersions","clearValues","document","querySelector","baseState","handleStartDateChange","date","startDate","moment","toISOString","format","handleEndDateChange","endDate","invalid","formIsValid","match","addEventListener","modalConfirmation","modalId","ModalWrapper","buttonTriggerText","modalHeading","buttonTriggerClassName","handleSubmit","invalidText","DatePicker","dateFormat","datePickerType","DatePickerInput","placeholder","version","versionPut","buttonId","getVersionDetails","buttonClassName","primaryButtonText","secondaryButtonText","ProductVersion","handleDeleteVersion","deleteVersion","getProductVersions","versions","productVersions","DataTable","rows","rowData","headerData","getHeaderProps","getTableProps","TableContainer","Table","TableHead","TableRow","header","TableHeader","TableBody","Object","keys","index","TableCell","Toggle","size","handleToggleChange","aria-label","defaultToggled","display","width","key","entVersion","homeUrl","customer","subscription","Breadcrumb","margin","BreadcrumbItem","href","loading","adminConfig","label","content","Tile","Accordion","AccordionItem","title","description","toString","subscribeToWidgetEvent","eventType","eventHandler","removeEventListener","KEYCLOAK_EVENT_TYPE","getKeycloakInstance","ATTRIBUTES","AdminConfigurationElement","mountPoint","createElement","unsubscribeFromKeycloakEvent","render","appendChild","getAttribute","Locale","ReactDOM","Provider","HTMLElement","customElements","define","apiCustomerDelete","apiCustomersGet","apiCustomerGet","apiCustomerPost","apiCustomerPut","apiAddProjectToCustomer","customerId","projectId","apiDeleteProjectFromCustomer","customerNumber","contactName","contactPhone","contactEmail","notes","customerPost","updateCustomerList","TextArea","apiPartnerPost","partner","apiProjectsGet","apiProjectsGetByCustomer","apiProjectGet","apiProjectPost","apiProjectPut","apiAddSubscriptionToProject","subscriptionId","apiAddUserToProject","userId","apiDeletePartnerFromProject","partnerId","apiDeleteSubscriptionFromProject","apiDeleteUserFromProject","apiAddPartnerToProject","apiGetProjectUsers","apiGetProjectSubscriptions","AuthenticatedView","children","UnauthenticatedView","partnerNumber","partnerPost","projectList","projects","result","allProjects","trim","alert","projectPut","updateProjectList","customerList","customers","getCustomers","getAllProjects","getProjectDetails","Modal","open","onRequestClose","closeModal","onRequestSubmit","ManagePartnersModal","handleRemovePartner","removePartner","err","partners","border","borderTop","ProjectActionItems","handleCloseModal","openEditProject","openManagePartners","isAdmin","history","deleteProject","OverflowMenuItem","itemText","handleDeleteProject","isDelete","editProject","editProjectModal","managePartners","managePartnersModal","manageSubscriptions","push","manageUsers","subscriptionParam","newOrRenewSubscription","openTicket","viewAllTickets","ticketsUrl","substr","indexOf","viewSubscription","overflowModals","OverflowMenu","flipped","menuOptionsClass","withRouter","formatStartDate","String","Date","toDateString","formatEndDate","lengthInMonths","setMonth","getMonth","apiSubscriptionGet","apiProjectSubscriptionPost","projectSubscriptionCreation","apiProjectSubscriptionPut","apiRenewSubscription","projectSubscriptionRenew","action","showMenu","callback","to","fontWeight","partnerIndex","entandoVersion","minHeight","paddingBottom","ButtonBody","icon","IconDelete","height","viewBox","fill","xmlns","d","IconDetails","IconEdit","IconPlus","fillRule","clipRule","mask-type","maskUnits","x","y","mask","getCustomerDetails","getCustomer","updateCustomer","projectPost","GhostButton","deleteCustomer","accordionOpened","textDecoration","getTime","handleSearch","newFilteredState","filter","toLowerCase","filteredCustomers","currentPage","undefined","role","test","numberOfPages","Math","ceil","customerCount","Search","onKeyPress","InlineLoading","indexOfLastItem","firstIndexOfCurrentPage","PaginationNav","loop","Boolean","page","Number","totalItems","itemsShown","jiraResource","apiJiraTicketsGet","apiJiraTicketPost","ticket","tickets","ticketSystemUrl","ticketingSystemBaseUrl","ticketCount","rel","ticketUrl","summary","priority","createDate","updateDate","subscriptionData","updateSubscription","users","params","license","level","user","username","handleDeleteSubscription","deleteSubscription","subscriptions","FORM_TYPE","SUBSCRIPTION_LEVEL","GOLD","PLATINUM","SUBSCRIPTION_STATUS","requested","pending","active","expired","submitSuccess","submitError","formatted","formType","subscriptionRequest","stateToSubscription","updateStateForSuccess","newSubscription","res","renewSubscription","entandoVersionId","str","isNaN","isNumeric","success","renewal","projectSubscription","toUpperCase","subscriptionLevelList","entries","unshift","versionList","statusList","setupFormComponents","disabled","subscriptionType","createFormMessage","subMessageKey","formLabelKey","successErrorMessage","renderForm","createTicket","types","priorities","error","padding","apiUserGetByUsernameAndEmail","email","apiKeycloakUserGet","realm","usersResource","mapKeycloakUserEmails","keycloakUsers","usernameEmailMap","Map","forEach","keycloakUser","set","assignUser","handleFormValidation","assignUserToProject","dispatchEvent","CustomEvent","getPortalUserId","portalUserId","portalUserApi","portalUser","warn","authServerUrl","userList","handleRemoveUser","displayUsers","handleUserDisplay","userAccess","row","cells","cell","userFunctionality","path","AppElement","KEYCLOAK_EVENT_ID","keycloakEventHandler","bind","keycloakEvent","detail","logout","loginUrl","location","redirectUri","origin","login","LoginElement","forceRefresh","exact","LocalAppElement"],"mappings":"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","file":"static/js/main.547c8c92.chunk.js","sourcesContent":["import i18n from 'i18n-js';\n\nimport en from './i18n/locales/en.json';\nimport it from './i18n/locales/it.json';\n\ni18n.defaultLocale = 'en';\ni18n.locale = 'en';\ni18n.fallbacks = true;\ni18n.translations = { en, it };\n\nexport const setLocale = locale => {\n  i18n.locale = locale;\n};\n\nexport default i18n;\n","export const DOMAIN = process.env.REACT_APP_PATH || ''; // eslint-disable-line import/prefer-default-export\n\n//Customer Portal roles\nexport const ADMIN = 'cp-admin';\nexport const SUPPORT = 'cp-support';\nexport const PARTNER = 'cp-partner';\nexport const CUSTOMER = 'cp-customer';\n\n//Page codes\nexport const PAGE_CUSTOMER_PORTAL = 'customer_portal.page'\nexport const PAGE_ADMIN_CONFIG = 'cp_admin_config.page'\n","import {ADMIN, SUPPORT, CUSTOMER, PARTNER, DOMAIN} from './constants';\n\nexport const getKeycloakToken = () => {\n  if (window && window.entando && window.entando.keycloak && window.entando.keycloak.authenticated) {\n    return window.entando.keycloak.token;\n  }\n  return '';\n};\n\nexport const isAuthenticated = props => {\n  const {keycloak} = props;\n  return keycloak.initialized && keycloak.authenticated;\n};\n\nexport const authenticationChanged = (props, prevProps) => {\n  const authenticated = isAuthenticated(props);\n  const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n  return authenticated && changedAuth;\n};\n\nexport const isPortalAdmin = () => {\n  return hasKeycloakClientRole(ADMIN);\n};\n\nexport const isPortalSupport = () => {\n  return hasKeycloakClientRole(SUPPORT);\n};\n\nexport const isPortalPartner = () => {\n  return hasKeycloakClientRole(PARTNER);\n};\n\nexport const isPortalCustomer = () => {\n  return hasKeycloakClientRole(CUSTOMER);\n};\n\nexport const isPortalAdminOrSupport = () => {\n  return isPortalAdmin() || isPortalSupport();\n};\n\nexport const isPortalCustomerOrPartner = () => {\n  return isPortalCustomer() || isPortalPartner();\n};\n\nexport const isPortalUser = () => {\n  return isPortalAdminOrSupport() || isPortalCustomerOrPartner();\n};\n\nexport const hasKeycloakClientRole = clientRole => {\n  if (getKeycloakToken()) {\n    const { resourceAccess } = window.entando.keycloak;\n    if (resourceAccess) {\n      for (const client in resourceAccess) {\n        const item = resourceAccess[client];\n        if (item.roles && item.roles.includes(clientRole)) {\n          // console.debug(\"Found role {} with client {} \", clientRole, client);\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n};\n\nexport const getDefaultOptions = () => ({\n  headers: new Headers({\n    Authorization: `Bearer ${getKeycloakToken()}`,\n    'Content-Type': 'application/json',\n  }),\n});\n\nexport const getDefaultKeycloakOptions = () => ({\n  headers: new Headers({\n    Authorization: `Bearer ${getKeycloakToken()}`,\n    'Content-Type': 'application/x-www-form-urlencoded',\n  }),\n});\n\nexport const getActiveSubscription = project => {\n  return (\n    project &&\n    project.projectSubscriptions &&\n    project.projectSubscriptions.find(item => {\n      return item.status === 'ACTIVE' ? item : null;\n    })\n  );\n};\n\nexport const getPageUrl = (pageCode, locale) => {\n  const url = `${DOMAIN}/${locale}/${pageCode}`;\n  return getUrl(url);\n}\n\nexport const getUrl = url => {\n  console.log('getUrl = ', url)\n  return `${url}`;\n};\n\nexport const request = async (url, options) => {\n  const response = await fetch(url, options);\n\n  const headers = {\n    ...(response.headers.has('X-Total-Count') ? {'X-Total-Count': parseInt(response.headers.get('X-Total-Count'), 10)} : {}),\n  };\n\n  if (response.status === 204) {\n    return { data: '', status: response.status };\n  }\n\n  return response.status >= 200 && response.status < 300\n    ? { data: await response.json(), headers, status: response.status }\n    : Promise.reject(new Error(response.statusText || response.status));\n};\n","import {getDefaultOptions, request} from './helpers';\n\nconst resource = 'api/ticketing-systems';\n\nexport const apiTicketingSystemDelete = async (serviceUrl, id) => {\n  const url = `${serviceUrl}/${resource}/${id}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\n//Simplifying assumptions\n// 1) Take the latest ticketing system as the current config. There should be only 1.\n// 2) Only load it once in the current context\nexport const apiCurrentTicketingSystemGet = async serviceUrl => {\n  if (window.entando.currentTicketingSystem == null) {\n    const ticketingSystems = (await apiTicketingSystemsGet(serviceUrl)).data;\n    window.entando.currentTicketingSystem = ticketingSystems && ticketingSystems.length ? ticketingSystems[ticketingSystems.length - 1] : null;\n  }\n  return window.entando.currentTicketingSystem;\n};\n\nexport const apiTicketingSystemsGet = async serviceUrl => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\n//Note: post and put both use a ticketingsystemrequest\nexport const apiTicketingSystemPost = async (serviceUrl, ticketingSystem, secret) => {\n  const url = `${serviceUrl}/${resource}`;\n  const tsRequest = {\n    \"ticketingSystem\": ticketingSystem,\n    \"secret\": secret\n  }\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n    body: JSON.stringify(tsRequest),\n  };\n  return request(url, options);\n};\n\nexport const apiTicketingSystemPut = async (serviceUrl, ticketingSystem, secret) => {\n  const url = `${serviceUrl}/${resource}`;\n  const tsRequest = {\n    \"ticketingSystem\": ticketingSystem,\n    \"secret\": secret\n  }\n  const options = {\n    ...getDefaultOptions(),\n    method: 'PUT',\n    body: JSON.stringify(tsRequest),\n  };\n  return request(url, options);\n};\n","import React from 'react';\n\nconst KeycloakContext = React.createContext(null);\n\nexport default KeycloakContext;\n","import PropTypes from 'prop-types';\n\nexport default PropTypes.oneOfType([PropTypes.func, PropTypes.shape({ current: PropTypes.elementType }), PropTypes.shape(null)]);\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React, { forwardRef, Component } from 'react';\nimport refType from '../components/__types__/ref';\nimport KeycloakContext from './KeycloakContext';\n\nexport default function withKeycloak(WrappedComponent) {\n  class WithKeycloakComponent extends Component {\n    renderWrappedComponent = value => {\n      const { forwardedRef, ...rest } = this.props;\n      return <WrappedComponent {...rest} ref={forwardedRef} keycloak={value} />;\n    };\n\n    render() {\n      return <KeycloakContext.Consumer>{this.renderWrappedComponent}</KeycloakContext.Consumer>;\n    }\n  }\n\n  WithKeycloakComponent.propTypes = {\n    forwardedRef: refType,\n  };\n\n  WithKeycloakComponent.defaultProps = {\n    forwardedRef: () => {},\n  };\n\n  return forwardRef((props, ref) => <WithKeycloakComponent {...props} forwardedRef={ref} />);\n}\n","import React, { Component } from 'react';\nimport i18n from '../../../i18n';\nimport { Form, TextInput, Select, SelectItem, Button } from 'carbon-components-react';\nimport {\n  apiCurrentTicketingSystemGet,\n  apiTicketingSystemDelete,\n  apiTicketingSystemPost,\n  apiTicketingSystemPut,\n} from '../../../api/ticketingsystem';\nimport {authenticationChanged, isAuthenticated, isPortalAdmin} from '../../../api/helpers';\nimport withKeycloak from '../../../auth/withKeycloak';\n\nclass TicketingSystem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ticketingSystem: {},\n      ticketingSystemType: 'Jira',\n      url: '',\n      serviceAccount: '',\n      serviceAccountSecret: '',\n      systemId: '',\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  async createTicketingSystem() {\n    const ticketingSystem = {\n      url: this.state.url,\n      serviceAccount: this.state.serviceAccount,\n      systemId: this.state.systemId,\n    };\n    const response = (await apiTicketingSystemPost(this.props.serviceUrl, ticketingSystem, this.state.serviceAccountSecret)).data;\n    this.setState({\n      ticketingSystem: response,\n    });\n  }\n\n  async updateTicketingSystem() {\n    const ticketingSystem = {\n      id: this.state.ticketingSystem.id,\n      url: this.state.url,\n      serviceAccount: this.state.serviceAccount,\n      systemId: this.state.systemId,\n    };\n    return await apiTicketingSystemPut(this.props.serviceUrl, ticketingSystem, this.state.serviceAccountSecret);\n  }\n\n  async fetchData() {\n    const ticketingSystem = await apiCurrentTicketingSystemGet(this.props.serviceUrl);\n    this.setState({\n      ticketingSystem: ticketingSystem,\n      url: ticketingSystem ? ticketingSystem.url : '',\n      serviceAccount: ticketingSystem ? ticketingSystem.serviceAccount : '',\n      //Secret needs to be entered each time\n      systemId: ticketingSystem ? ticketingSystem.systemId : '',\n    });\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.fetchData();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.fetchData();\n    }\n  }\n\n  async deleteTicketingSystem() {\n    return await apiTicketingSystemDelete(this.props.serviceUrl, this.state.ticketingSystem.id);\n  }\n\n  handleDelete() {\n    if (window.confirm('Are you sure you want to delete this ticketing system?')) {\n      this.deleteTicketingSystem()\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.deleted'),\n            submitColour: '#24a148',\n          });\n          this.fetchData();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  }\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    if (!this.state.ticketingSystem) {\n      this.createTicketingSystem()\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.created'),\n            submitColour: '#24a148',\n          });\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    } else {\n      this.updateTicketingSystem()\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.updated'),\n            submitColour: '#24a148',\n          });\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  render() {\n    const ticketingSystemTypes = ['Jira'];\n    if (isPortalAdmin()) {\n      return (\n        <div className=\"cp-form\">\n          <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\n          <Form onSubmit={this.handleFormSubmit}>\n            <div className=\"bx--grid\">\n              <div className=\"bx--row\">\n                <div className=\"bx--col\">\n                  <Select\n                    id=\"ticketingSystemType\"\n                    name=\"ticketingSystemType\"\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.selectBackendTicketingSystem')}\n                    value={this.state.ticketingSystemType}\n                    onChange={this.handleChanges}\n                  >\n                    <SelectItem text={i18n.t('adminConfig.integrationTicketingSystem.select')}\n                                value=\"ticketing-system\"/>\n                    {ticketingSystemTypes.map((type, i) => (\n                      <SelectItem key={i} text={type} value={type}>\n                        {type}\n                      </SelectItem>\n                    ))}\n                  </Select>\n                  <TextInput\n                    id=\"serviceAccount\"\n                    name=\"serviceAccount\"\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.userName')}\n                    value={this.state.serviceAccount}\n                    onChange={this.handleChanges}\n                  />\n                  <TextInput\n                    id=\"systemId\"\n                    name=\"systemId\"\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.projectName')}\n                    value={this.state.systemId}\n                    onChange={this.handleChanges}\n                  />\n                </div>\n                <div className=\"bx--col\">\n                  <TextInput\n                    id=\"url\"\n                    name=\"url\"\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.url')}\n                    value={this.state.url}\n                    onChange={this.handleChanges}\n                  />\n                  <TextInput\n                    id=\"serviceAccountSecret\"\n                    name=\"serviceAccountSecret\"\n                    type=\"password\"\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.password')}\n                    value={this.state.serviceAccountSecret}\n                    onChange={this.handleChanges}\n                  />\n                </div>\n              </div>\n              <Button kind=\"primary\" tabIndex={0} type=\"submit\">\n                {' '}\n                {i18n.t('buttons.submit')}{' '}\n              </Button>\n              {this.state.ticketingSystem ? (\n                <Button kind=\"danger\" onClick={() => this.handleDelete()}>\n                  {' '}\n                  Delete{' '}\n                </Button>\n              ) : null}\n            </div>\n          </Form>\n        </div>\n      );\n    }\n    // Unauthorized\n    else {\n      return <p>{i18n.t('userMessages.unauthorized')}</p>;\n    }\n  }\n}\n\nexport default withKeycloak(TicketingSystem);\n","import { getDefaultOptions, request } from './helpers';\n\nconst resource = 'api/entando-versions';\n\nexport const apiProductVersionsGet = async serviceUrl => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiProductVersionGet = async (serviceUrl, versionId) => {\n  const url = `${serviceUrl}/${resource}/${versionId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiUpdateProductVersionsStatus = async (serviceUrl, id) => {\n  const url = `${serviceUrl}/${resource}/${id}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'PUT',\n  };\n  return request(url, options);\n};\n\nexport const apiProductVersionPost = async (serviceUrl, productVersion) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n    body: productVersion ? JSON.stringify(productVersion) : null,\n  };\n  return request(url, options);\n};\n\nexport const apiProductVersionPut = async (serviceUrl, productVersion) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'PUT',\n    body: productVersion ? JSON.stringify(productVersion) : null,\n  };\n  return request(url, options);\n};\n\nexport const apiProductVersionDelete = async (serviceUrl, id) => {\n  const url = `${serviceUrl}/${resource}/${id}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n","import React, { Component } from 'react';\nimport i18n from '../../i18n';\nimport { ModalWrapper, Form, TextInput, DatePicker, DatePickerInput } from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiProductVersionPost } from '../../api/productVersion';\nimport moment from 'moment';\nimport {isAuthenticated} from \"../../api/helpers\";\n\nclass AddProductVersionModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      name: '',\n      startDate: '',\n      endDate: '',\n      invalid: {},\n      submitMsg: '',\n      submitColour: 'black',\n    };\n\n    this.baseState = this.state;\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    //name\n    if (this.state.name === '') {\n      formIsValid = false;\n      invalid['name'] = true;\n    }\n\n    if (typeof this.state.startDate !== 'undefined') {\n      if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\n        formIsValid = false;\n        invalid['startDate'] = true;\n      }\n    }\n\n    if (typeof this.state.endDate !== 'undefined') {\n      if (!this.state.endDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\n        formIsValid = false;\n        invalid['endDate'] = true;\n      }\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  async addProductVersion() {\n    if (isAuthenticated(this.props)) {\n      return await apiProductVersionPost(this.props.serviceUrl, this.state);\n    }\n  }\n\n  handleFormSubmit = () => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      this.addProductVersion()\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.added'),\n            submitColour: '#24a148',\n          });\n          this.props.updateProductVersions();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  clearValues = () => {\n    const customerModalElement = document.querySelector('#modal-form-product-version');\n    if (!customerModalElement.className.includes('is-visible')) {\n      this.setState(this.baseState);\n    }\n  };\n\n  handleStartDateChange = date => {\n    this.setState({\n      startDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\n    });\n  };\n\n  handleEndDateChange = date => {\n    this.setState({\n      endDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\n    });\n  };\n\n  componentDidMount() {\n    const modalOpenButton = document.querySelector('.add-product-version-button');\n    modalOpenButton.addEventListener('click', this.clearValues, false);\n  }\n\n  render() {\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>\n      </div>\n    );\n    const modalId = 'modal-form-product-version';\n    return (\n      <ModalWrapper\n        buttonTriggerText={i18n.t('buttons.addProductVersion')}\n        modalHeading={i18n.t('adminDashboard.addProductVersion.title')}\n        buttonTriggerClassName=\"add-product-version bx--btn bx--btn--tertiary add-product-version-button\"\n        className=\"modal-form\"\n        id={modalId}\n        handleSubmit={this.handleFormSubmit}\n      >\n        {modalConfirmation}\n        <div className=\"form-container\">\n          <Form onSubmit={this.handleFormSubmit}>\n            <TextInput\n              id={'name' + modalId}\n              name=\"name\"\n              labelText={i18n.t('adminDashboard.addProductVersion.productVersion')}\n              value={this.state.name}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['name']}\n            />\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange}>\n              <DatePickerInput\n                id={'startDate' + modalId}\n                name=\"startDate\"\n                placeholder=\"mm/dd/yyyy\"\n                labelText={i18n.t('adminDashboard.addProductVersion.productVersionStartDate')}\n                value={this.state.startDate}\n                //onChange={this.handleChanges}\n                type=\"text\"\n                invalidText={i18n.t('validation.invalid.date')}\n                invalid={this.state.invalid['startDate']}\n              />\n            </DatePicker>\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleEndDateChange}>\n              <DatePickerInput\n                id={'endDate' + modalId}\n                name=\"endDate\"\n                placeholder=\"mm/dd/yyyy\"\n                labelText={i18n.t('adminDashboard.addProductVersion.productVersionEndDate')}\n                value={this.state.endDate}\n                type=\"text\"\n                invalidText={i18n.t('validation.invalid.date')}\n                invalid={this.state.invalid['endDate']}\n              />\n            </DatePicker>\n          </Form>\n        </div>\n        {modalConfirmation}\n      </ModalWrapper>\n    );\n  }\n}\n\nexport default withKeycloak(AddProductVersionModal);\n","import React, { Component } from 'react';\nimport i18n from '../../i18n';\nimport { ModalWrapper, Form, TextInput, DatePicker, DatePickerInput } from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiProductVersionGet, apiProductVersionPut } from '../../api/productVersion';\nimport moment from 'moment';\nimport {authenticationChanged, isAuthenticated} from '../../api/helpers';\n\nclass EditVersionModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      name: '',\n      startDate: '',\n      endDate: '',\n      invalid: {},\n      modalId: '',\n      buttonId: '',\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    //name\n    if (this.state.name === '') {\n      formIsValid = false;\n      invalid['name'] = true;\n    }\n\n    if (typeof this.state.startDate !== 'undefined') {\n      if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\n        formIsValid = false;\n        invalid['startDate'] = true;\n      }\n    }\n\n    if (typeof this.state.endDate !== 'undefined') {\n      if (!this.state.endDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\n        formIsValid = false;\n        invalid['endDate'] = true;\n      }\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.getVersionDetails();\n    }\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  handleStartDateChange = date => {\n    this.setState({\n      startDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\n    });\n  };\n\n  handleEndDateChange = date => {\n    this.setState({\n      endDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\n    });\n  };\n\n  async getVersionDetails() {\n    const version = await apiProductVersionGet(this.props.serviceUrl, this.props.version.id);\n    this.setState({\n      name: version.data.name,\n      startDate: moment(version.data.startDate).format('MM/DD/YYYY'),\n      endDate: moment(version.data.endDate).format('MM/DD/YYYY'),\n      modalId: 'modal-form-version-edit-' + version.data.id,\n      buttonId: 'edit-version-button-' + version.data.id,\n    });\n  }\n\n  async versionPut(version) {\n    return await apiProductVersionPut(this.props.serviceUrl, version);\n  }\n\n  handleFormSubmit = () => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const version = {\n        id: this.props.version.id,\n        name: this.state.name,\n        startDate: moment(this.state.startDate).format(),\n        endDate: moment(this.state.endDate).format(),\n      };\n      this.versionPut(version)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.updated'),\n            submitColour: '#24a148',\n          });\n          this.props.updateProductVersions();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.getVersionDetails();\n      const modalOpenButton = document.querySelector('.edit-version-button-' + this.props.version.id);\n      modalOpenButton.addEventListener('click', this.clearValues, false);\n    }\n  }\n\n  render() {\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>\n      </div>\n    );\n    const buttonClassName = 'bx--btn bx--btn--ghost edit-version-button-' + this.props.version.id;\n    const modalId = this.state.modalId;\n    return (\n      <ModalWrapper\n        buttonTriggerText={i18n.t('buttons.edit')}\n        modalHeading={i18n.t('adminDashboard.addProject.editTitle')}\n        buttonTriggerClassName={buttonClassName}\n        className=\"modal-form\"\n        id={this.state.modalId}\n        handleSubmit={this.handleFormSubmit}\n        primaryButtonText={i18n.t('modalText.save')}\n        secondaryButtonText={i18n.t('modalText.cancel')}\n      >\n        {modalConfirmation}\n        <div className=\"form-container\">\n          <Form onSubmit={this.handleFormSubmit} id={'form' + modalId}>\n            <TextInput\n              id={'name' + modalId}\n              name=\"name\"\n              labelText={i18n.t('adminDashboard.addProject.projectName') + ' *'}\n              value={this.state.name}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['name']}\n            />\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange}\n                        value={this.state.startDate}>\n              <DatePickerInput\n                id={'startDate' + modalId}\n                name=\"startDate\"\n                placeholder=\"mm/dd/yyyy\"\n                labelText={i18n.t('subscriptionDetails.startDate') + ' *'}\n                onChange={this.handleChanges}\n                type=\"text\"\n                invalidText={i18n.t('validation.invalid.date')}\n                invalid={this.state.invalid['startDate']}\n              />\n            </DatePicker>\n            <DatePicker\n              dateFormat=\"m/d/Y\"\n              datePickerType=\"single\"\n              onChange={this.handleEndDateChange}\n              id={'endDate' + modalId}\n              name=\"endDate\"\n              value={this.state.endDate}\n            >\n              <DatePickerInput\n                id={'endDate' + modalId}\n                name=\"endDate\"\n                placeholder=\"mm/dd/yyyy\"\n                labelText={i18n.t('subscriptionDetails.endDate') + ' *'}\n                onChange={this.handleChanges}\n                type=\"text\"\n                invalidText={i18n.t('validation.invalid.date')}\n                invalid={this.state.invalid['endDate']}\n              />\n            </DatePicker>\n          </Form>\n        </div>\n        {modalConfirmation}\n      </ModalWrapper>\n    );\n  }\n}\n\nexport default withKeycloak(EditVersionModal);\n","import React, { Component } from 'react';\nimport i18n from '../../../i18n';\nimport {\n  DataTable,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableHeader,\n  TableBody,\n  TableCell,\n  Toggle,\n  Button,\n} from 'carbon-components-react';\nimport { apiProductVersionDelete, apiProductVersionsGet, apiUpdateProductVersionsStatus } from '../../../api/productVersion';\nimport withKeycloak from '../../../auth/withKeycloak';\nimport AddProductVersionModal from '../AddProductVersionModal';\nimport {authenticationChanged, isAuthenticated, isPortalAdminOrSupport} from '../../../api/helpers';\nimport EditVersionModal from '../EditVersionModal';\n\nclass ProductVersion extends Component {\n  constructor() {\n    super();\n    this.state = {\n      versions: '',\n    };\n  }\n\n  componentDidMount() {\n    if (isPortalAdminOrSupport()) {\n      this.getProductVersions();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      if (isPortalAdminOrSupport()) {\n        this.getProductVersions();\n      }\n    }\n  }\n\n  async getProductVersions() {\n    if (isAuthenticated(this.props)) {\n      const productVersions = await apiProductVersionsGet(this.props.serviceUrl);\n\n      this.setState({\n        versions: productVersions.data,\n      });\n    }\n  }\n\n  async deleteVersion(id) {\n    if (isAuthenticated(this.props)) {\n      return await apiProductVersionDelete(this.props.serviceUrl, id);\n    }\n  }\n\n  handleDeleteVersion = (e, id) => {\n    e.preventDefault();\n    if (window.confirm('Are you sure you want to delete this Entando version?')) {\n      this.deleteVersion(id)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.deleted'),\n            submitColour: '#24a148',\n          });\n          this.updateProductVersions();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  updateProductVersions = () => {\n    this.getProductVersions();\n  };\n\n  async handleToggleChange(id) {\n    return await apiUpdateProductVersionsStatus(this.props.serviceUrl, id);\n  }\n\n  render() {\n    if (isPortalAdminOrSupport()) {\n      return (\n        <div>\n          <DataTable rows={rowData} headers={headerData}>\n            {({rows, headers, getHeaderProps, getTableProps}) => (\n              <TableContainer>\n                <Table {...getTableProps()}>\n                  <TableHead>\n                    <TableRow>\n                      {headers.map(header => (\n                        <TableHeader {...getHeaderProps({header})}>{header.header}</TableHeader>\n                      ))}\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {Object.keys(this.state.versions).length !== 0\n                      ? this.state.versions.map((productVersion, index) => (\n                        <TableRow key={index}>\n                          <TableCell>{productVersion.name}</TableCell>\n                          <TableCell>\n                            <Toggle\n                              size=\"sm\"\n                              onClick={() => this.handleToggleChange(productVersion.id)}\n                              aria-label=\"toggle button\"\n                              id={'toggle' + productVersion.id}\n                              defaultToggled={productVersion.status}\n                            />\n                          </TableCell>\n                          <TableCell>{productVersion.startDate}</TableCell>\n                          <TableCell>{productVersion.endDate}</TableCell>\n                          <TableCell>\n                            <div style={{display: 'flex'}}>\n                              <EditVersionModal\n                                key={productVersion.id}\n                                version={productVersion}\n                                serviceUrl={this.props.serviceUrl}\n                                updateProductVersions={this.updateProductVersions}\n                              />\n                                <Button\n                                  kind=\"ghost\"\n                                  onClick={e => this.handleDeleteVersion(e, productVersion.id)}\n                                  style={{ display: 'flex', width: '100%', color: 'red' }}\n                                >\n                                  {i18n.t('buttons.delete')}\n                                </Button>\n                              </div>\n                            </TableCell>\n                          </TableRow>\n                        ))\n                      : null}\n                  </TableBody>\n                </Table>\n              </TableContainer>\n            )}\n          </DataTable>\n          <br />\n          <AddProductVersionModal serviceUrl={this.props.serviceUrl} updateProductVersions={this.updateProductVersions} />\n        </div>\n      );\n    } else {\n      return <p>{i18n.t('userMessages.unauthorized')}</p>;\n    }\n  }\n}\n\nconst headerData = [\n  {\n    header: i18n.t('adminConfig.manageProductVersion.entandoVersion'),\n    key: 'entVersion',\n  },\n  {\n    header: i18n.t('adminConfig.manageProductVersion.status'),\n    key: 'status',\n  },\n  {\n    header: i18n.t('adminConfig.manageProductVersion.startDate'),\n    key: 'startDate',\n  },\n  {\n    header: i18n.t('adminConfig.manageProductVersion.supportEndDate'),\n    key: 'endDate',\n  },\n  {\n    header: i18n.t('customerDashboard.action'),\n    key: 'action',\n  },\n];\n\nconst rowData = [\n  {\n    id: 'a',\n    entVersion: '5.2',\n    status: <Toggle size=\"sm\" aria-label=\"toggle button\" defaultToggled id=\"status-1\" />,\n    startDate: 'April, 2018',\n    endDate: 'April, 2022',\n  },\n  {\n    id: 'b',\n    entVersion: '6.3',\n    status: <Toggle size=\"sm\" aria-label=\"toggle button\" id=\"status-2\"/>,\n    startDate: 'Jile, 2019',\n    endDate: 'April, 2023',\n  },\n  {\n    id: 'c',\n    entVersion: '6.2',\n    status: <Toggle size=\"sm\" aria-label=\"toggle button\" defaultToggled id=\"status-3\"/>,\n    startDate: 'September, 2020',\n    endDate: 'April, 2024',\n  },\n];\n\nexport default withKeycloak(ProductVersion);\n","import {Component} from 'react';\nimport withKeycloak from \"../../auth/withKeycloak\";\nimport {Breadcrumb, BreadcrumbItem} from \"carbon-components-react\";\nimport {getActiveSubscription, getPageUrl} from \"../../api/helpers\";\nimport {PAGE_CUSTOMER_PORTAL} from \"../../api/constants\";\nimport i18n from \"../../i18n\";\n\nclass Breadcrumbs extends Component {\n\n  render() {\n    const homeUrl = getPageUrl(PAGE_CUSTOMER_PORTAL, this.props.locale);\n\n    let customer = this.props.customer || {};\n    const project = this.props.project;\n    if (project) {\n      customer = project.customer || {};\n    }\n    const subscription = this.props.subscription ? this.props.subscription : getActiveSubscription(project);\n\n    return (\n      <Breadcrumb style={{margin: \"1em 0\"}}>\n        <BreadcrumbItem href={`${homeUrl}#`}>{i18n.t('customerDashboard.customerPortal')}</BreadcrumbItem>\n        {customer && customer.name && (\n          <BreadcrumbItem href={`${homeUrl}#/customer-details/${customer.id}`}>\n            {customer.name}\n          </BreadcrumbItem>\n        )}\n        {project && project.name && subscription && subscription.id && (\n          <BreadcrumbItem href={`${homeUrl}#/subscription-details/${subscription.id}`}>\n            {project.name}\n          </BreadcrumbItem>\n        )}\n      </Breadcrumb>\n    )\n  }\n}\n\nexport default withKeycloak(Breadcrumbs);\n","import React from 'react';\nimport i18n from '../../../i18n';\nimport { Accordion, AccordionItem, Tile } from 'carbon-components-react';\nimport TicketingSystem from './TicketingSystem';\nimport ProductVersion from './ProductVersion';\nimport {authenticationChanged, isAuthenticated, isPortalAdmin} from '../../../api/helpers';\nimport withKeycloak from '../../../auth/withKeycloak';\nimport Breadcrumbs from \"../../Breadcrumbs/Breadcrumbs\";\n\nclass AdminConfiguration extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n    };\n    this.adminConfig = [\n      {\n        label: (\n          <div>\n            <p className=\"title\">{i18n.t('adminConfig.integrationTicketingSystem.title')}</p>\n            <p className=\"desc\">{i18n.t('adminConfig.integrationTicketingSystem.desc')}</p>\n          </div>\n        ),\n        content: <TicketingSystem serviceUrl={this.props.serviceUrl} />,\n      },\n      {\n        label: (\n          <div>\n            <p className=\"title\">{i18n.t('adminConfig.manageProductVersion.title')}</p>\n            <p className=\"desc\">{i18n.t('adminConfig.manageProductVersion.desc')}</p>\n          </div>\n        ),\n        content: <ProductVersion serviceUrl={this.props.serviceUrl} />,\n      },\n    ];\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  render() {\n    // if (!this.state.loading) {\n      // Authorized\n      // if (isPortalAdmin()) {\n        return (\n          <div id=\"entando-customer-portal\">\n            <Breadcrumbs locale={this.props.locale}/>\n            <div className=\"form-container\">\n              <Tile>\n                <p className=\"title\">{i18n.t('adminConfig.title')}  sachin</p>\n                <p className=\"desc\">{i18n.t('adminConfig.desc')}</p>\n              </Tile>\n              <Accordion>\n                {this.adminConfig.map((item, index) => (\n                  <AccordionItem key={index.toString()} index={index} title={item.label} description={item.description}>\n                    <div>{item.content}</div>\n                  </AccordionItem>\n                ))}\n              </Accordion>\n            </div>\n          </div>\n        );\n      // }\n      // Unauthorized\n      // else {\n      //   return <p>{i18n.t('userMessages.unauthorized')}</p>;\n      // }\n    }\n    // Loading\n    // else {\n    //   return null;\n    // }\n  // }\n}\nexport default withKeycloak(AdminConfiguration);\n","export const publishWidgetEvent = (eventId, payload) => {\n  const widgetEvent = new CustomEvent(eventId, {\n    detail: {\n      payload,\n    },\n  });\n  window.dispatchEvent(widgetEvent);\n};\n\nexport const createWidgetEventPublisher = eventType => payload => publishWidgetEvent(eventType, payload);\n\nexport const subscribeToWidgetEvent = (eventType, eventHandler) => {\n  window.addEventListener(eventType, eventHandler);\n\n  return () => {\n    window.removeEventListener(eventType, eventHandler);\n  };\n};\n\nexport const subscribeToWidgetEvents = (widgetEvents, eventHandler) => {\n  widgetEvents.forEach(eventType => window.addEventListener(eventType, eventHandler));\n\n  return () => {\n    widgetEvents.forEach(eventType => window.removeEventListener(eventType, eventHandler));\n  };\n};\n\nexport const widgetEventToFSA = widgetEvent => {\n  // for info about Flux Standard Action (FSA) see https://github.com/redux-utilities/flux-standard-action\n  const {\n    type,\n    detail: { payload, error, meta },\n  } = widgetEvent;\n  return { type, payload, error, meta };\n};\n","export const INPUT_EVENT_TYPES = {\n  formUpdate: 'customer.form.update',\n  formCreate: 'customer.form.create',\n  formDelete: 'customer.form.delete',\n};\n\nexport const OUTPUT_EVENT_TYPES = {\n  select: 'customer.table.select',\n  add: 'customer.table.add',\n  error: 'customer.table.error',\n  delete: 'customer.table.delete',\n};\n\nexport const KEYCLOAK_EVENT_TYPE = 'keycloak';\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport AdminConfiguration from '../components/Admin/Configuration/AdminConfiguration';\nimport '../index.scss';\nimport * as Locale from '../i18n';\n\nimport KeycloakContext from '../auth/KeycloakContext';\n\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\n\nconst getKeycloakInstance = () =>\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\n    initialized: false,\n  };\n\nconst ATTRIBUTES = {\n  hidden: 'hidden',\n  locale: 'locale',\n  paginationMode: 'pagination-mode',\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\n  serviceUrl: 'service-url',\n};\n\nclass AdminConfigurationElement extends HTMLElement {\n  container;\n\n  mountPoint;\n\n  unsubscribeFromKeycloakEvent;\n\n  keycloak = getKeycloakInstance();\n\n  connectedCallback() {\n    this.mountPoint = document.createElement('div');\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\n\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\n      this.render();\n    });\n\n    this.render();\n\n    //retargetEvents(shadowRoot);\n    this.appendChild(this.mountPoint);\n  }\n\n  render() {\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\n    Locale.setLocale(locale);\n\n    ReactDOM.render(\n      <KeycloakContext.Provider value={this.keycloak}>\n        <AdminConfiguration serviceUrl={serviceUrl} locale={locale}/>\n      </KeycloakContext.Provider>,\n      this.mountPoint\n    );\n  }\n}\n\ncustomElements.get('cp-admin-configuration') || customElements.define('cp-admin-configuration', AdminConfigurationElement);\n","import { getDefaultOptions, request, getUrl } from './helpers';\n\nconst resource = 'api/customers';\n\nexport const apiCustomerDelete = async (serviceUrl, id) => {\n  const url = `${serviceUrl}/${resource}/${id}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\nexport const apiCustomersGet = async serviceUrl => {\n  const url = getUrl(`${serviceUrl}/${resource}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiCustomerGet = async (serviceUrl, id) => {\n  const url = getUrl(`${serviceUrl}/${resource}/${id}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiCustomerPost = async (serviceUrl, customer) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n    body: customer ? JSON.stringify(customer) : null,\n  };\n  return request(url, options);\n};\n\nexport const apiCustomerPut = async (serviceUrl, customer) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'PUT',\n    body: customer ? JSON.stringify(customer) : null,\n  };\n  return request(url, options);\n};\n\nexport const apiAddProjectToCustomer = async (serviceUrl, customerId, projectId) => {\n  const url = `${serviceUrl}/${resource}/${customerId}/projects/${projectId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n  };\n  return request(url, options);\n};\n\nexport const apiDeleteProjectFromCustomer = async (serviceUrl, customerId, projectId) => {\n  const url = `${serviceUrl}/${resource}/${customerId}/projects/${projectId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n","import React, { Component } from 'react';\nimport i18n from '../../i18n';\nimport { ModalWrapper, Form, TextInput, TextArea } from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {apiCustomerPost} from '../../api/customers';\nimport {isAuthenticated} from \"../../api/helpers\";\n\nclass AddCustomerModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      name: '',\n      customerNumber: '',\n      contactName: '',\n      contactPhone: '',\n      contactEmail: '',\n      notes: '',\n      invalid: {},\n      submitMsg: '',\n      submitColour: 'black',\n    };\n\n    this.baseState = this.state;\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    if (this.state.name === '') {\n      formIsValid = false;\n      invalid['name'] = true;\n    }\n\n    if (this.state.customerNumber === '') {\n      formIsValid = false;\n      invalid['customerNumber'] = true;\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  async customerPost(customer) {\n    if (isAuthenticated(this.props)) {\n      return await apiCustomerPost(this.props.serviceUrl, customer);\n    }\n  }\n\n  handleFormSubmit = () => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const customer = {\n        name: this.state.name,\n        customerNumber: this.state.customerNumber,\n        contactName: this.state.contactName,\n        contactPhone: this.state.contactPhone,\n        contactEmail: this.state.contactEmail,\n        notes: this.state.notes,\n      };\n\n      this.customerPost(customer)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.added'),\n            submitColour: '#24a148',\n          });\n          this.props.updateCustomerList();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  clearValues = () => {\n    const customerModalElement = document.querySelector('#modal-form-customer');\n    if (!customerModalElement.className.includes('is-visible')) {\n      this.setState(this.baseState);\n    }\n  };\n\n  componentDidMount() {\n    const modalOpenButton = document.querySelector('.add-customer-button');\n    modalOpenButton.addEventListener('click', this.clearValues, false);\n  }\n\n  render() {\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>\n      </div>\n    );\n    const modalId = 'modal-form-customer';\n    return (\n      <ModalWrapper\n        buttonTriggerText={i18n.t('buttons.addCustomer')}\n        modalHeading={i18n.t('adminDashboard.addCustomer.title')}\n        buttonTriggerClassName=\"add-customer bx--btn bx--btn--tertiary add-customer-button\"\n        className=\"modal-form\"\n        id={modalId}\n        handleSubmit={this.handleFormSubmit}\n        primaryButtonText={i18n.t('modalText.save')}\n        secondaryButtonText={i18n.t('modalText.cancel')}\n      >\n        {modalConfirmation}\n        <div className=\"form-container\">\n          <Form onSubmit={this.handleFormSubmit}>\n            <TextInput\n              id={'name' + modalId}\n              name=\"name\"\n              labelText={i18n.t('adminDashboard.addCustomer.customerName') + ' *'}\n              value={this.state.name}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['name']}\n            />\n            <TextInput\n              id={'customerNumber' + modalId}\n              name=\"customerNumber\"\n              labelText={i18n.t('adminDashboard.addCustomer.customerNumber') + ' *'}\n              value={this.state.customerNumber}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['customerNumber']}\n            />\n            <TextInput\n              id={'contactName' + modalId}\n              name=\"contactName\"\n              labelText={i18n.t('adminDashboard.addCustomer.contactName')}\n              value={this.state.contactName}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={'contactPhone' + modalId}\n              name=\"contactPhone\"\n              labelText={i18n.t('adminDashboard.addCustomer.contactPhone')}\n              value={this.state.contactPhone}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={'contactEmail' + modalId}\n              name=\"contactEmail\"\n              labelText={i18n.t('adminDashboard.addCustomer.contactEmail')}\n              value={this.state.contactEmail}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.email')}\n              invalid={this.state.invalid['contactEmail']}\n            />\n            <TextArea\n              id={'notes' + modalId}\n              name=\"notes\"\n              labelText={i18n.t('adminDashboard.addCustomer.notes')}\n              value={this.state.notes}\n              onChange={this.handleChanges}\n            />\n          </Form>\n        </div>\n        {modalConfirmation}\n      </ModalWrapper>\n    );\n  }\n}\n\nexport default withKeycloak(AddCustomerModal);\n","import { getDefaultOptions, request, getUrl } from './helpers';\n\nconst resource = 'api/partners';\n\nexport const apiPartnerDelete = async (serviceUrl, id) => {\n  const url = `${serviceUrl}/${resource}/${id}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\nexport const apiPartnersGet = async serviceUrl => {\n  const url = getUrl(`${serviceUrl}/${resource}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiPartnerPost = async (serviceUrl, partner) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n    body: partner ? JSON.stringify(partner) : null,\n  };\n  return request(url, options);\n};\n","import { getDefaultOptions, request, getUrl } from './helpers';\n\nconst resource = 'api/projects';\n\nexport const apiProjectsDelete = async (serviceUrl, id) => {\n  const url = `${serviceUrl}/${resource}/${id}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\nexport const apiProjectsGet = async serviceUrl => {\n  const url = getUrl(`${serviceUrl}/${resource}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiProjectsGetByCustomer = async (serviceUrl, id) => {\n  const url = getUrl(`${serviceUrl}/${resource}/customer/${id}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiProjectGet = async (serviceUrl, id) => {\n  const url = getUrl(`${serviceUrl}/${resource}/${id}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiProjectPost = async (serviceUrl, project) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n    body: project ? JSON.stringify(project) : null,\n  };\n  return request(url, options);\n};\n\nexport const apiProjectPut = async (serviceUrl, project) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'PUT',\n    body: project ? JSON.stringify(project) : null,\n  };\n  return request(url, options);\n};\n\nexport const apiAddTicketToProject = async (serviceUrl, projectId, ticketId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/tickets/${ticketId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n  };\n  return request(url, options);\n};\n\nexport const apiAddSubscriptionToProject = async (serviceUrl, projectId, subscriptionId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/subscriptions/${subscriptionId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n  };\n  return request(url, options);\n};\n\nexport const apiAddUserToProject = async (serviceUrl, projectId, userId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/users/${userId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n  };\n  return request(url, options);\n};\n\nexport const apiDeletePartnerFromProject = async (serviceUrl, projectId, partnerId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/partners/${partnerId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\nexport const apiDeleteSubscriptionFromProject = async (serviceUrl, projectId, subscriptionId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/subscriptions/${subscriptionId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\nexport const apiDeleteUserFromProject = async (serviceUrl, projectId, userId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/users/${userId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\nexport const apiAddPartnerToProject = async (serviceUrl, projectId, partnerId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/partners/${partnerId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n  };\n  return request(url, options);\n};\n\nexport const apiGetProjectUsers = async (serviceUrl, projectId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/users/`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n  return request(url, options);\n};\n\nexport const apiGetProjectSubscriptions = async (serviceUrl, projectId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/subscriptions/`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n  return request(url, options);\n};\n","export const AuthenticatedView = ({ children, keycloak }) => {\n  const authenticated = keycloak && keycloak.initialized && keycloak.authenticated;\n  return authenticated ? children : null;\n};\n\nexport const UnauthenticatedView = ({ children, keycloak }) => {\n  const authenticated = keycloak && keycloak.initialized && keycloak.authenticated;\n  return !authenticated ? children : null;\n};\n","import React, {Component} from 'react';\nimport i18n from '../../i18n';\nimport {ModalWrapper, Form, TextInput, Select, SelectItem, TextArea} from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {apiPartnerPost} from '../../api/partners';\nimport {apiProjectsGet, apiAddPartnerToProject} from '../../api/projects';\nimport {authenticationChanged, isAuthenticated} from '../../api/helpers';\nimport {AuthenticatedView} from '../../auth/KeycloakViews';\n\nclass AddPartnerModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      projectList: {},\n      projectId: '',\n      name: '',\n      partnerNumber: '',\n      notes: '',\n      invalid: {},\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.fetchData();\n\n      const modalOpenButton = document.querySelector('.add-partner-button');\n      modalOpenButton.addEventListener('click', this.clearValues, false);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.fetchData();\n    }\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    //project\n    if (this.state.projectId === '' || this.state.projectId === 'project-list') {\n      formIsValid = false;\n      invalid['projectId'] = true;\n    }\n\n    if (this.state.name === '') {\n      formIsValid = false;\n      invalid['name'] = true;\n    }\n\n    if (this.state.partnerNumber === '') {\n      formIsValid = false;\n      invalid['partnerNumber'] = true;\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  async fetchData() {\n    if (isAuthenticated(this.props)) {\n      let projects = {};\n      try {\n        projects = (await apiProjectsGet(this.props.serviceUrl)).data;\n      } catch (err) {\n        console.log(err);\n      }\n      this.setState({\n        projectList: projects ? projects : {},\n      });\n    }\n  }\n\n  async partnerPost(partner) {\n    if (isAuthenticated(this.props)) {\n      const result = await apiPartnerPost(this.props.serviceUrl, partner);\n      return await apiAddPartnerToProject(this.props.serviceUrl, this.state.projectId, result.data.id);\n    }\n  }\n\n  handleFormSubmit = () => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const partner = {\n        name: this.state.name,\n        partnerNumber: this.state.partnerNumber,\n        notes: this.state.notes,\n      };\n      this.partnerPost(partner)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.added'),\n            submitColour: '#24a148',\n          });\n          this.props.updateCustomerList();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  clearValues = () => {\n    const partnerModalElement = document.querySelector('#modal-form-partner');\n    if (!partnerModalElement.className.includes('is-visible')) {\n      this.setState({\n        projectId: '',\n        name: '',\n        partnerNumber: '',\n        notes: '',\n        invalid: {},\n        submitMsg: '',\n        submitColour: 'black',\n      });\n    }\n  };\n\n  render() {\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>\n      </div>\n    );\n    const {keycloak} = this.props;\n    const modalId = 'modal-form-partner';\n    return (\n      <AuthenticatedView keycloak={keycloak}>\n        <ModalWrapper\n          buttonTriggerText={i18n.t('buttons.addPartner')}\n          modalHeading={i18n.t('adminDashboard.addPartner.title')}\n          buttonTriggerClassName=\"add-partner bx--btn bx--btn--tertiary add-partner-button\"\n          className=\"modal-form\"\n          id={modalId}\n          handleSubmit={this.handleFormSubmit}\n          primaryButtonText={i18n.t('modalText.save')}\n          secondaryButtonText={i18n.t('modalText.cancel')}\n        >\n          {modalConfirmation}\n          <div className=\"form-container\">\n            <Form onSubmit={this.handleFormSubmit}>\n              <Select\n                id={'projectId' + modalId}\n                name=\"projectId\"\n                labelText={i18n.t('adminDashboard.addPartner.projectList') + ' *'}\n                value={this.state.projectId}\n                onChange={this.handleChanges}\n                invalidText={i18n.t('validation.invalid.required')}\n                invalid={this.state.invalid['projectId']}\n              >\n                <SelectItem text={i18n.t('adminDashboard.addPartner.selectProject')} value=\"project-list\"/>\n                {Object.keys(this.state.projectList).length !== 0\n                  ? this.state.projectList.map((project, i) => (\n                    <SelectItem key={i} text={project.name} value={project.id}>\n                      {project.name}\n                    </SelectItem>\n                  ))\n                  : null}\n              </Select>\n\n              <TextInput\n                id={'name' + modalId}\n                name=\"name\"\n                labelText={i18n.t('adminDashboard.addPartner.partnerName') + ' *'}\n                value={this.state.name}\n                onChange={this.handleChanges}\n                invalidText={i18n.t('validation.invalid.required')}\n                invalid={this.state.invalid['name']}\n              />\n              <TextInput\n                id={'partnerNumber' + modalId}\n                name=\"partnerNumber\"\n                labelText={i18n.t('adminDashboard.addPartner.partnerNumber') + ' *'}\n                value={this.state.partnerNumber}\n                onChange={this.handleChanges}\n                invalidText={i18n.t('validation.invalid.required')}\n                invalid={this.state.invalid['partnerNumber']}\n              />\n              <TextArea\n                name=\"notes\"\n                labelText={i18n.t('adminDashboard.addPartner.notes')}\n                value={this.state.notes}\n                onChange={this.handleChanges}\n              />\n            </Form>\n          </div>\n          {modalConfirmation}\n        </ModalWrapper>\n      </AuthenticatedView>\n    );\n  }\n}\n\nexport default withKeycloak(AddPartnerModal);\n","import React, { Component } from 'react';\nimport i18n from '../../i18n';\nimport {Modal, Form, TextInput, TextArea} from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiCustomersGet } from '../../api/customers';\nimport {apiProjectGet, apiProjectPut, apiProjectsGet} from '../../api/projects';\nimport {authenticationChanged, isAuthenticated} from \"../../api/helpers\";\n\nclass EditProjectModal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      projects: {},\n      customerList: {},\n      customerId: '',\n      name: '',\n      description: '',\n      systemId: '',\n      contactName: '',\n      contactPhone: '',\n      contactEmail: '',\n      notes: '',\n      invalid: {},\n      modalId: '',\n      buttonId: '',\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    //name\n    if (this.state.name === '') {\n      formIsValid = false;\n      invalid['name'] = true;\n    }\n\n    //description\n    if (this.state.description === '') {\n      formIsValid = false;\n      invalid['description'] = true;\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  async getCustomers() {\n    if (isAuthenticated(this.props)) {\n      const customers = await apiCustomersGet(this.props.serviceUrl);\n      this.setState({customerList: customers});\n    }\n  }\n\n  async getProjectDetails() {\n    if (isAuthenticated(this.props)) {\n      const project = await apiProjectGet(this.props.serviceUrl, this.props.project.id);\n      this.setState({\n        name: project.data.name,\n        description: project.data.description,\n        systemId: project.data.systemId,\n        contactName: project.data.contactName,\n        contactPhone: project.data.contactPhone,\n        contactEmail: project.data.contactEmail,\n        notes: project.data.notes,\n        modalId: 'modal-form-project-edit-' + project.data.id,\n        buttonId: 'edit-project-button-' + project.data.id,\n      });\n    }\n  }\n\n  async getAllProjects() {\n    const projects = await apiProjectsGet(this.props.serviceUrl);\n    this.setState({\n      projects: projects.data,\n    });\n  }\n\n  async projectPut(project) {\n    if (isAuthenticated(this.props)) {\n      return await apiProjectPut(this.props.serviceUrl, project);\n    }\n  }\n\n  handleFormSubmit = () => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const project = {\n        id: this.props.project.id,\n        customer: this.props.project.customer,\n        name: this.state.name,\n        description: this.state.description,\n        systemId: this.state.systemId,\n        contactName: this.state.contactName,\n        contactPhone: this.state.contactPhone,\n        contactEmail: this.state.contactEmail,\n        notes: this.state.notes,\n      };\n      for (var i = 0; i < this.props.allProjects.length; i++) {\n        if (\n          project.systemId === this.props.allProjects[i].systemId &&\n          project.id !== this.props.allProjects[i].id &&\n          project.systemId.trim() !== ''\n        ) {\n          window.alert('That system id is already in use in another project');\n          return;\n        }\n      }\n      this.projectPut(project)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.updated'),\n            submitColour: '#24a148',\n          });\n          this.props.updateProjectList();\n          //For now leave the modal open after saving\n          // this.props.closeModal();\n        })\n        .catch((e) => {\n          console.log(e);\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.getCustomers();\n      this.getAllProjects();\n      this.getProjectDetails();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.getCustomers();\n      this.getAllProjects();\n      this.getProjectDetails();\n    }\n  }\n\n\n  render() {\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>\n      </div>\n    );\n    const modalId = this.state.modalId;\n    return (\n      <Modal\n        id={this.state.modalId}\n        className=\"modal-form\"\n        open={this.props.open}\n        onRequestClose={this.props.closeModal}\n        onRequestSubmit={this.handleFormSubmit}\n        modalHeading={i18n.t('adminDashboard.addProject.editTitle')}\n        primaryButtonText={i18n.t('modalText.save')}\n        secondaryButtonText={i18n.t('modalText.cancel')}\n      >\n        {modalConfirmation}\n        <div className=\"form-container\">\n          <Form onSubmit={this.handleFormSubmit}>\n            <TextInput\n              id={'name' + modalId}\n              name=\"name\"\n              labelText={i18n.t('adminDashboard.addProject.projectName') + ' *'}\n              value={this.state.name}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['name']}\n            />\n            <TextInput\n              id={'description' + modalId}\n              name=\"description\"\n              labelText={i18n.t('adminDashboard.addProject.projectDesc') + ' *'}\n              value={this.state.description}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['description']}\n            />\n            <TextInput\n              id={'systemId' + modalId}\n              name=\"systemId\"\n              labelText={i18n.t('adminDashboard.addProject.systemId')}\n              value={this.state.systemId}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={'contactName' + modalId}\n              name=\"contactName\"\n              labelText={i18n.t('adminDashboard.addProject.contactName')}\n              value={this.state.contactName}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={'contactPhone' + modalId}\n              name=\"contactPhone\"\n              labelText={i18n.t('adminDashboard.addProject.contactPhone')}\n              value={this.state.contactPhone}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={'contactEmail' + modalId}\n              name=\"contactEmail\"\n              labelText={i18n.t('adminDashboard.addProject.contactEmail')}\n              value={this.state.contactEmail}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.email')}\n              invalid={this.state.invalid['contactEmail']}\n            />\n            <TextArea\n              name=\"notes\"\n              labelText={i18n.t('adminDashboard.addProject.notes')}\n              value={this.state.notes}\n              onChange={this.handleChanges}\n            />\n          </Form>\n        </div>\n        {modalConfirmation}\n      </Modal>\n    );\n  }\n}\n\nexport default withKeycloak(EditProjectModal);\n","import React, {Component} from 'react';\nimport i18n from '../../i18n';\nimport {\n  Button,\n  DataTable,\n  Modal,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {isPortalAdminOrSupport} from '../../api/helpers';\nimport {apiDeletePartnerFromProject} from '../../api/projects';\n\nclass ManagePartnersModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      projectId: this.props.project.id,\n      project: this.props.project,\n    };\n\n    this.headerData = [\n      {\n        header: i18n.t('adminDashboard.addPartner.partnerName'),\n        key: 'partner',\n      },\n      {\n        header: i18n.t('adminDashboard.addPartner.partnerNumber'),\n        key: 'partnerNumber',\n      },\n      {\n        header: i18n.t('adminDashboard.addPartner.notes'),\n        key: 'notes',\n      },\n      {\n        header: i18n.t('customerDashboard.action'),\n        key: 'action',\n      },\n    ];\n  }\n\n  async removePartner(projectId, partnerId) {\n    if (isPortalAdminOrSupport()) {\n      return await apiDeletePartnerFromProject(this.props.serviceUrl, projectId, partnerId);\n    }\n  }\n\n  handleRemovePartner = (e, projectId, partnerId) => {\n    e.preventDefault();\n    if (window.confirm('Are you sure you want to remove this partner from the project?')) {\n      this.removePartner(projectId, partnerId)\n        .then(result => {\n          this.setState({\n            project: result.data,\n            submitMsg: i18n.t('submitMessages.deleted'),\n            submitColour: '#24a148',\n          });\n          this.props.updateProjectList();\n          //For now leave the modal open after saving\n          // this.props.closeModal();\n        })\n        .catch(err => {\n          console.log(err);\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  render() {\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>\n      </div>\n    );\n    const modalId = 'modal-form-manage-partners';\n    return (\n      <Modal\n        id={modalId}\n        className=\"modal-form\"\n        open={this.props.open}\n        onRequestClose={this.props.closeModal}\n        onRequestSubmit={this.props.closeModal}\n        modalHeading={i18n.t('adminDashboard.managePartners.title')}\n        primaryButtonText={i18n.t('modalText.done')}\n      >\n        {modalConfirmation}\n        <div>\n          <DataTable rows={rowData} headers={this.headerData}>\n            {({rows, headers, getHeaderProps, getTableProps}) => (\n              <TableContainer description={i18n.t('customerDashboard.tableDesc')}>\n                <Table {...getTableProps()}>\n                  <TableHead>\n                    <TableRow key=\"headerRow\">\n                      {headers.map(header => {\n                        return <TableHeader {...getHeaderProps({header})}>{header.header}</TableHeader>;\n                      })}\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {this.state.project.partners.map((partner, index) => {\n                      return (\n                        <TableRow key={'partner' + index}>\n                          <TableCell>{partner.name}</TableCell>\n                          <TableCell>{partner.partnerNumber}</TableCell>\n                          <TableCell>{partner.notes}</TableCell>\n                          <TableCell>\n                            <div>\n                              <Button\n                                kind=\"ghost\"\n                                onClick={e => this.handleRemovePartner(e, this.state.projectId, partner.id)}\n                                style={{display: 'block', width: '100%', color: 'red'}}\n                              >\n                                {i18n.t('buttons.delete')}\n                              </Button>\n                              <hr style={{margin: '0', border: 'none', borderTop: '1px solid lightgrey'}}/>\n                            </div>\n                          </TableCell>\n                        </TableRow>\n                      );\n                    })}\n                  </TableBody>\n                </Table>\n              </TableContainer>\n            )}\n          </DataTable>\n        </div>\n        {modalConfirmation}\n      </Modal>\n    );\n  }\n}\n\nconst rowData = [\n  {\n    id: 'a',\n    name: 'Partner 1',\n    partnerNumber: '123',\n  },\n  {\n    id: 'b',\n    name: 'Partner 2',\n    partnerNumber: '456',\n  },\n];\n\nexport default withKeycloak(ManagePartnersModal);\n","import React, {Component} from 'react';\nimport i18n from '../../i18n';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {OverflowMenu, OverflowMenuItem} from 'carbon-components-react';\nimport EditProjectModal from '../Admin/EditProjectModal';\nimport ManagePartnersModal from '../Admin/ManagePartnersModal';\nimport {isPortalAdmin} from '../../api/helpers';\nimport {withRouter} from 'react-router';\n\nclass ProjectActionItems extends Component {\n  constructor() {\n    super();\n    this.state = {\n      openEditProject: false,\n      openManagePartners: false,\n    };\n  }\n\n  handleCloseModal = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({\n      openEditProject: false,\n      openManagePartners: false\n    });\n  };\n\n  render() {\n    const isAdmin = isPortalAdmin();\n    const {history} = this.props;\n\n    const deleteProject = isAdmin && (\n      <OverflowMenuItem itemText={i18n.t('buttons.delete')}\n                        onClick={e => this.props.handleDeleteProject(e, this.props.project.id)}\n                        isDelete={true}/>\n    );\n\n    const editProject = isAdmin && (\n      <OverflowMenuItem itemText={i18n.t('buttons.edit')}\n                        onClick={() => this.setState({openEditProject: true})}/>\n    );\n    const editProjectModal = isAdmin && (\n      <EditProjectModal\n        open={this.state.openEditProject}\n        closeModal={this.handleCloseModal}\n        allProjects={this.props.allProjects}\n        project={this.props.project}\n        serviceUrl={this.props.serviceUrl}\n        updateProjectList={this.props.updateProjectList}\n      />\n    );\n\n    const managePartners = isAdmin && (\n      <OverflowMenuItem itemText={i18n.t('buttons.managePartners')}\n                        onClick={() => this.setState({openManagePartners: true})}/>\n    );\n    const managePartnersModal = isAdmin && (\n      <ManagePartnersModal\n        open={this.state.openManagePartners}\n        closeModal={this.handleCloseModal}\n        project={this.props.project}\n        serviceUrl={this.props.serviceUrl}\n        updateProjectList={this.props.updateProjectList}\n      />\n    );\n\n    const manageSubscriptions = isAdmin && (\n      <OverflowMenuItem itemText={i18n.t('buttons.manageSubscriptions')}\n                        onClick={() => history.push(`/manage-subscriptions/${this.props.project.id}`)}/>\n    );\n\n    const manageUsers = isAdmin && (\n      <OverflowMenuItem itemText={i18n.t('buttons.manageUsers')}\n                        onClick={() => history.push(`/manage-users/${this.props.project.id}`)}/>\n    );\n\n    const subscriptionParam = this.props.subscription ? '/' + this.props.subscription.id : '';\n    const newOrRenewSubscription = ((!this.props.subscription || !isAdmin) && (\n      <OverflowMenuItem itemText={i18n.t('buttons.subscriptionRequest')}\n                        onClick={() => history.push(`/subscription/${this.props.project.id}${subscriptionParam}`)}/>\n    ));\n\n    const openTicket = this.props.subscription && (\n      <OverflowMenuItem itemText={i18n.t('buttons.openTicket')}\n                        onClick={() => history.push(`/ticket/${this.props.project.id}`)}/>\n    );\n\n    let viewAllTickets = (<></>);\n    const ticketingSystem = this.props.ticketingSystem;\n    if (this.props.subscription && ticketingSystem && ticketingSystem.url) {\n      const ticketsUrl = ticketingSystem.url.substr(0, ticketingSystem.url.indexOf('/rest')) +\n        '/issues/?jql=Organizations=' + this.props.project.systemId;\n      viewAllTickets = (\n        <OverflowMenuItem itemText={i18n.t('buttons.viewAllTickets')}\n                          onClick={() => window.open(ticketsUrl)}/>\n      );\n    }\n\n    const viewSubscription = this.props.subscription && (\n      <OverflowMenuItem itemText={i18n.t('buttons.view')}\n                        onClick={() => history.push(`/subscription-details/${this.props.subscription.id}`)}/>\n    );\n\n    const overflowModals = (\n      <>\n        {editProjectModal}\n        {managePartnersModal}\n      </>\n    );\n\n    return (\n      <>\n        <OverflowMenu flipped={true} menuOptionsClass='entando-customer-portal'>\n          {viewSubscription}\n          {editProject}\n          {newOrRenewSubscription}\n          {openTicket}\n          {viewAllTickets}\n          {manageSubscriptions}\n          {manageUsers}\n          {managePartners}\n          {deleteProject}\n        </OverflowMenu>\n        {overflowModals}\n      </>\n    );\n  }\n}\n\nexport default withKeycloak(withRouter(ProjectActionItems));\n","import {getDefaultOptions, request} from './helpers';\nimport moment from 'moment';\n\nconst resource = 'api/project-subscriptions';\n\nexport const formatStartDate = startDate => {\n  return String(new Date(startDate).toDateString());\n};\n\nexport const formatEndDate = (startDate, lengthInMonths) => {\n  const endDate = new Date(startDate).setMonth(new Date(startDate).getMonth() + lengthInMonths);\n  return String(new Date(endDate).toDateString());\n};\n\nexport const stripTime = date => {\n  return moment(date).format('MM/DD/YYYY');\n};\n\nexport const apiSubscriptionGet = async (serviceUrl, id) => {\n  const url = `${serviceUrl}/${resource}/${id}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n  return request(url, options);\n};\n\n// Project Subscription creation consists of an object containing a projectSubscription, an entandoVersionId, and a\n// project id, see SubscriptionCreationRequest.\n/**\n * Called to create a new project subscription\n *\n * @param {string} serviceUrl\n * @param {ProjectSubscriptionCreation} projectSubscriptionCreation\n * @returns\n */\nexport const apiProjectSubscriptionPost = async (serviceUrl, projectSubscriptionCreation) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n    body: projectSubscriptionCreation ? JSON.stringify(projectSubscriptionCreation) : null,\n  };\n  return request(url, options);\n};\n\nexport const apiProjectSubscriptionPut = async (serviceUrl, projectSubscriptionCreation) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'PUT',\n    body: projectSubscriptionCreation ? JSON.stringify(projectSubscriptionCreation) : null,\n  };\n  return request(url, options);\n};\n\n// Same format as {projectSubscriptionCreation}\nexport const apiRenewSubscription = async (serviceUrl, projectSubscriptionRenew) => {\n  const url = `${serviceUrl}/${resource}/renew`;\n\n  const options = {\n    ...getDefaultOptions(),\n    method: 'PUT',\n    body: projectSubscriptionRenew ? JSON.stringify(projectSubscriptionRenew) : null,\n  };\n\n  return request(url, options);\n};\n","import {Component} from 'react';\nimport {\n  DataTable,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableHeader,\n  TableBody,\n  TableCell\n} from 'carbon-components-react';\nimport '../../index.scss';\nimport {apiDeleteProjectFromCustomer} from '../../api/customers';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {Link} from 'react-router-dom';\nimport i18n from '../../i18n';\nimport {authenticationChanged, getActiveSubscription, isAuthenticated, isPortalAdminOrSupport} from '../../api/helpers';\nimport {apiCurrentTicketingSystemGet} from '../../api/ticketingsystem';\nimport ProjectActionItems from '../Admin/ProjectActionItems';\nimport {formatEndDate, formatStartDate} from '../../api/subscriptions';\nimport {apiProjectsGetByCustomer} from '../../api/projects';\n\nclass CustomerDataTable extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      projects: {},\n      ticketingSystem: {},\n      action: 'Edit',\n      showMenu: {},\n    };\n    this.headerData = [\n      {\n        header: i18n.t('customerDashboard.projectName'),\n        key: 'projectName',\n      },\n      {\n        header: i18n.t('customerDashboard.partners'),\n        key: 'partners',\n      },\n      {\n        header: i18n.t('customerDashboard.entandoVersion'),\n        key: 'entandoVersion',\n      },\n      {\n        header: i18n.t('customerDashboard.status'),\n        key: 'status',\n      },\n      {\n        header: i18n.t('customerDashboard.startDate'),\n        key: 'startDate',\n      },\n      {\n        header: i18n.t('customerDashboard.endDate'),\n        key: 'endDate',\n      },\n      {\n        header: i18n.t('customerDetails.notes'),\n        key: 'notes',\n      },\n      {\n        header: i18n.t('customerDashboard.action'),\n        key: 'action',\n      },\n    ];\n  }\n\n  async fetchData() {\n    if (isAuthenticated(this.props)) {\n      const {customer, serviceUrl} = this.props;\n      try {\n        let projects = {};\n        let ticketingSystem = {};\n        if (customer && customer.id) {\n          projects = (await apiProjectsGetByCustomer(serviceUrl, customer.id)).data;\n          ticketingSystem = await apiCurrentTicketingSystemGet(serviceUrl);\n        }\n        this.setState({\n          projects: projects,\n          ticketingSystem: ticketingSystem,\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    this.render();\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.fetchData();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.fetchData();\n    }\n  }\n\n  // fix warning: Can't perform a React state update on an unmounted component\n  componentWillUnmount() {\n    this.setState = (state, callback) => {\n      //no-op\n    };\n  }\n\n  updateProjectList = () => {\n    this.fetchData();\n  };\n\n  async deleteProject(id) {\n    if (isAuthenticated(this.props)) {\n      return await apiDeleteProjectFromCustomer(this.props.serviceUrl, this.props.customer.id, id);\n    }\n  }\n\n  handleDeleteProject = (e, id) => {\n    e.preventDefault();\n    if (window.confirm('Are you sure you want to delete this project?')) {\n      this.deleteProject(id)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.deleted'),\n            submitColour: '#24a148',\n          });\n          this.props.updateCustomerList();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        {this.state.projects && (Object.keys(this.state.projects).length !== 0) && (\n          <DataTable rows={[{id: '1'}]} headers={this.headerData}>\n            {({rows, headers, getHeaderProps, getTableProps}) => (\n              <TableContainer description={i18n.t('customerDashboard.tableDesc')}>\n                <Table {...getTableProps()}>\n                  <TableHead>\n                    <TableRow key=\"headerRow\">\n                      {headers.map(header => {\n                        let result;\n                        if (header.header === i18n.t('customerDetails.notes')) {\n                          if (isPortalAdminOrSupport()) {\n                            result = <TableHeader {...getHeaderProps({header})}>{header.header}</TableHeader>;\n                          }\n                        } else {\n                          result = <TableHeader {...getHeaderProps({header})}>{header.header}</TableHeader>;\n                        }\n                        return result;\n                      })}\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {this.state.projects.map((project, index) => {\n                      const subscription = getActiveSubscription(project);\n                      if (!subscription) {\n                        return (\n                          <TableRow key={index}>\n                            <TableCell style={{fontWeight: 'bold'}}>{project.name}</TableCell>\n                            {project.partners.length !== 0 ? (\n                              <TableCell>\n                                {project.partners.map((partner, partnerIndex) => (\n                                  <div key={partnerIndex}>{partner.name}</div>\n                                ))}\n                              </TableCell>\n                            ) : (\n                              <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                            )}\n                            <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                            <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                            <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                            <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                            {isPortalAdminOrSupport() ?\n                              <TableCell style={{width: '250px'}}>{project.notes}</TableCell> : null}\n                            <TableCell>\n                              <ProjectActionItems\n                                serviceUrl={this.props.serviceUrl}\n                                ticketingSystem={this.state.ticketingSystem}\n                                locale={this.props.locale}\n                                project={project}\n                                allProjects={this.state.projects}\n                                handleDeleteProject={this.handleDeleteProject}\n                                updateProjectList={this.updateProjectList}\n                              />\n                            </TableCell>\n                          </TableRow>\n                        );\n                      } else {\n                        return (\n                          <TableRow key={index}>\n                            <TableCell>\n                              <Link to={`/subscription-details/${subscription.id}`}\n                                    style={{fontWeight: 'bold'}}>{project.name}</Link>\n                            </TableCell>\n                              {project.partners.length !== 0 ? (\n                                <TableCell>\n                                  {project.partners.map((partner, partnerIndex) => (\n                                    <div key={partnerIndex}>{partner.name}</div>\n                                  ))}\n                                </TableCell>\n                              ) : (\n                                <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              )}\n                              {subscription.entandoVersion ? (\n                                <TableCell>{subscription.entandoVersion.name}</TableCell>\n                              ) : (\n                                <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              )}\n                              <TableCell>{subscription.status}</TableCell>\n                              <TableCell>{formatStartDate(subscription.startDate)}</TableCell>\n                              <TableCell>{formatEndDate(subscription.startDate, subscription.lengthInMonths)}</TableCell>\n                              {isPortalAdminOrSupport() ?\n                                <TableCell style={{width: '250px'}}>{project.notes}</TableCell> : null}\n                              <TableCell>\n                                <ProjectActionItems\n                                  serviceUrl={this.props.serviceUrl}\n                                  ticketingSystem={this.state.ticketingSystem}\n                                  locale={this.props.locale}\n                                  subscription={subscription}\n                                  project={project}\n                                  allProjects={this.state.projects}\n                                  handleDeleteProject={this.handleDeleteProject}\n                                  updateProjectList={this.updateProjectList}\n                                />\n                              </TableCell>\n                          </TableRow>\n                        );\n                      }\n                    })}\n                  </TableBody>\n                </Table>\n              </TableContainer>\n            )}\n          </DataTable>\n        )}\n      </div>\n    )\n  }\n}\n\nexport default withKeycloak(CustomerDataTable);\n","import {Component} from 'react';\nimport i18n from '../../i18n';\nimport { Tile } from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\n\nclass CustomerDetails extends Component {\n  constructor() {\n    super();\n    this.state = {\n      customer: {},\n    };\n  }\n\n  render() {\n    return (\n      <div className=\"customer-details\">\n        <Tile style={{margin: '2em 0', minHeight: '0', paddingBottom: '0'}}>\n          <div>\n            <strong>{i18n.t('customerDashboard.customerId')}</strong> {this.props.customer.id}\n          </div>\n          <div>\n            <strong>{i18n.t('customerDashboard.customerName')}</strong> {this.props.customer.name}\n          </div>\n        </Tile>\n      </div>\n    );\n  }\n}\n\nexport default withKeycloak(CustomerDetails);\n","import React from 'react';\nimport i18n from '../../i18n';\n\nconst ButtonBody = ({label, icon}) => {\n  return (\n    <>\n      {i18n.t(label)}\n      {icon}\n    </>\n  );\n}\n\nexport default ButtonBody;\n","import React from 'react';\n\nexport const IconDelete = (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M7 6H6V12H7V6Z\" fill=\"#0F62FE\"/>\n    <path d=\"M10 6H9V12H10V6Z\" fill=\"#0F62FE\"/>\n    <path\n      d=\"M2 3V4H3V14C3 14.2652 3.10536 14.5196 3.29289 14.7071C3.48043 14.8946 3.73478 15 4 15H12C12.2652 15 12.5196 14.8946 12.7071 14.7071C12.8946 14.5196 13 14.2652 13 14V4H14V3H2ZM4 14V4H12V14H4Z\"\n      fill=\"#0F62FE\"/>\n    <path d=\"M10 1H6V2H10V1Z\" fill=\"#0F62FE\"/>\n  </svg>\n);\n\nexport const IconDetails = (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M15.47 7.83C14.8819 6.30882 13.861 4.99331 12.5334 4.04604C11.2058 3.09878 9.62971 2.56129 7.99997 2.5C6.37023 2.56129 4.79416 3.09878 3.46657 4.04604C2.13898 4.99331 1.11805 6.30882 0.52997 7.83C0.490254 7.93985 0.490254 8.06015 0.52997 8.17C1.11805 9.69118 2.13898 11.0067 3.46657 11.954C4.79416 12.9012 6.37023 13.4387 7.99997 13.5C9.62971 13.4387 11.2058 12.9012 12.5334 11.954C13.861 11.0067 14.8819 9.69118 15.47 8.17C15.5097 8.06015 15.5097 7.93985 15.47 7.83ZM7.99997 12.5C5.34997 12.5 2.54997 10.535 1.53497 8C2.54997 5.465 5.34997 3.5 7.99997 3.5C10.65 3.5 13.45 5.465 14.465 8C13.45 10.535 10.65 12.5 7.99997 12.5Z\"\n      fill=\"#0F62FE\"/>\n    <path\n      d=\"M8 5C7.40666 5 6.82664 5.17595 6.33329 5.50559C5.83994 5.83524 5.45543 6.30377 5.22836 6.85195C5.0013 7.40013 4.94189 8.00333 5.05765 8.58527C5.1734 9.16721 5.45912 9.70176 5.87868 10.1213C6.29824 10.5409 6.83279 10.8266 7.41473 10.9424C7.99667 11.0581 8.59987 10.9987 9.14805 10.7716C9.69623 10.5446 10.1648 10.1601 10.4944 9.66671C10.8241 9.17336 11 8.59334 11 8C11 7.20435 10.6839 6.44129 10.1213 5.87868C9.55871 5.31607 8.79565 5 8 5ZM8 10C7.60444 10 7.21776 9.8827 6.88886 9.66294C6.55996 9.44318 6.30362 9.13082 6.15224 8.76537C6.00087 8.39991 5.96126 7.99778 6.03843 7.60982C6.1156 7.22186 6.30608 6.86549 6.58579 6.58579C6.86549 6.30608 7.22186 6.1156 7.60982 6.03843C7.99778 5.96126 8.39992 6.00087 8.76537 6.15224C9.13082 6.30362 9.44318 6.55996 9.66294 6.88886C9.8827 7.21776 10 7.60444 10 8C10 8.53043 9.78929 9.03914 9.41421 9.41421C9.03914 9.78929 8.53043 10 8 10Z\"\n      fill=\"#0F62FE\"/>\n  </svg>\n);\n\nexport const IconEdit = (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M15 13H1V14H15V13Z\" fill=\"#0F62FE\"/>\n    <path\n      d=\"M12.7 4.5C13.1 4.1 13.1 3.5 12.7 3.1L10.9 1.3C10.5 0.9 9.9 0.9 9.5 1.3L2 8.8V12H5.2L12.7 4.5ZM10.2 2L12 3.8L10.5 5.3L8.7 3.5L10.2 2ZM3 11V9.2L8 4.2L9.8 6L4.8 11H3Z\"\n      fill=\"#0F62FE\"/>\n  </svg>\n);\n\nexport const IconPlus = (\n  <svg width=\"15\" height=\"16\" viewBox=\"0 0 15 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path fillRule=\"evenodd\" clipRule=\"evenodd\"\n          d=\"M7.96875 7.5V3.5H7.03125V7.5H3.28125V8.5H7.03125V12.5H7.96875V8.5H11.7188V7.5H7.96875Z\" fill=\"#002F87\"/>\n    <mask id=\"mask0\" mask-type=\"alpha\" maskUnits=\"userSpaceOnUse\" x=\"3\" y=\"3\" width=\"9\" height=\"10\">\n      <path fillRule=\"evenodd\" clipRule=\"evenodd\"\n            d=\"M7.96875 7.5V3.5H7.03125V7.5H3.28125V8.5H7.03125V12.5H7.96875V8.5H11.7188V7.5H7.96875Z\" fill=\"white\"/>\n    </mask>\n    <g mask=\"url(#mask0)\">\n    </g>\n  </svg>\n);\n","import React, {Component} from 'react';\nimport i18n from '../../i18n';\nimport {ModalWrapper, Form, TextInput, TextArea} from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {apiCustomerGet, apiCustomerPut} from '../../api/customers';\nimport {authenticationChanged, isAuthenticated} from '../../api/helpers';\nimport ButtonBody from '../Buttons/ButtonBody';\nimport {IconEdit} from '../../helpers/icons'\n\nclass EditCustomerModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      name: '',\n      customerNumber: '',\n      contactName: '',\n      contactPhone: '',\n      contactEmail: '',\n      notes: '',\n      invalid: {},\n      modalId: '',\n      buttonId: '',\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    //name\n    if (this.state.name === '') {\n      formIsValid = false;\n      invalid['name'] = true;\n    }\n\n    //customerNumber\n    if (this.state.customerNumber === '') {\n      formIsValid = false;\n      invalid['customerNumber'] = true;\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  async updateCustomer(customer) {\n    if (isAuthenticated(this.props)) {\n      return await apiCustomerPut(this.props.serviceUrl, customer);\n    }\n  }\n\n  getCustomerDetails = customerId => {\n    this.getCustomer(customerId);\n  };\n\n  async getCustomer(customerId) {\n    if (isAuthenticated(this.props)) {\n      const customer = (await apiCustomerGet(this.props.serviceUrl, customerId)).data;\n      this.setState({\n        name: customer.name,\n        customerNumber: customer.customerNumber,\n        contactName: customer.contactName,\n        contactPhone: customer.contactPhone,\n        contactEmail: customer.contactEmail,\n        notes: customer.notes,\n        modalId: 'modal-form-customer-edit-' + customer.id,\n        buttonId: 'edit-customer-button-' + customer.id,\n      });\n    }\n  }\n\n  handleFormSubmit = () => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const customer = {\n        id: this.props.customer.id,\n        name: this.state.name,\n        customerNumber: this.state.customerNumber,\n        contactName: this.state.contactName,\n        contactPhone: this.state.contactPhone,\n        contactEmail: this.state.contactEmail,\n        notes: this.state.notes,\n      };\n      this.updateCustomer(customer)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.updated'),\n            submitColour: '#24a148',\n          });\n          this.props.updateCustomerList();\n          this.getCustomerDetails(this.props.customer.id);\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  clearValues = () => {\n    const customerModalElement = document.querySelector('#' + this.state.modalId);\n    if (!customerModalElement.className.includes('is-visible')) {\n      this.setState({\n        name: this.props.customer.name,\n        customerNumber: this.props.customer.customerNumber,\n        contactName: this.props.customer.contactName,\n        contactPhone: this.props.customer.contactPhone,\n        contactEmail: this.props.customer.contactEmail,\n        notes: this.props.customer.notes,\n        invalid: {},\n      });\n    }\n  };\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      if (this.props.customerId) {\n        this.getCustomerDetails(this.props.customerId);\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.getCustomerDetails(this.props.customerId);\n    }\n  }\n\n  render() {\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>\n      </div>\n    );\n    const modalId = this.state.modalId;\n    const buttonClassName = 'bx--btn bx--btn--ghost edit-customer-button-' + this.props.customerId;\n    return (\n      modalId && (\n        <ModalWrapper\n          buttonTriggerText={<ButtonBody label='buttons.edit' icon={IconEdit}/>}\n          modalHeading={i18n.t('adminDashboard.editCustomer.title')}\n          buttonTriggerClassName={buttonClassName}\n          className=\"modal-form\"\n          id={modalId}\n          handleSubmit={this.handleFormSubmit}\n          primaryButtonText={i18n.t('modalText.save')}\n          secondaryButtonText={i18n.t('modalText.cancel')}\n        >\n          {modalConfirmation}\n          <div className=\"form-container\">\n            <Form onSubmit={this.handleFormSubmit} id={'form-' + modalId}>\n              <TextInput\n                id={'name' + modalId}\n                name=\"name\"\n                labelText={i18n.t('adminDashboard.addCustomer.customerName') + ' *'}\n                value={this.state.name}\n                onChange={this.handleChanges}\n                invalidText={i18n.t('validation.invalid.required')}\n                invalid={this.state.invalid['name']}\n              />\n              <TextInput\n                id={'customerNumber' + modalId}\n                name=\"customerNumber\"\n                labelText={i18n.t('adminDashboard.addCustomer.customerNumber') + ' *'}\n                value={this.state.customerNumber}\n                onChange={this.handleChanges}\n                invalidText={i18n.t('validation.invalid.required')}\n                invalid={this.state.invalid['customerNumber']}\n              />\n              <TextInput\n                id={'contactName' + modalId}\n                name=\"contactName\"\n                labelText={i18n.t('adminDashboard.addCustomer.contactName')}\n                value={this.state.contactName}\n                onChange={this.handleChanges}\n              />\n              <TextInput\n                id={'contactPhone' + modalId}\n                name=\"contactPhone\"\n                labelText={i18n.t('adminDashboard.addCustomer.contactPhone')}\n                value={this.state.contactPhone}\n                onChange={this.handleChanges}\n              />\n              <TextInput\n                id={'contactEmail' + modalId}\n                name=\"contactEmail\"\n                labelText={i18n.t('adminDashboard.addCustomer.contactEmail')}\n                value={this.state.contactEmail}\n                onChange={this.handleChanges}\n                invalidText={i18n.t('validation.invalid.email')}\n                invalid={this.state.invalid['contactEmail']}\n              />\n              <TextArea\n                name=\"notes\"\n                labelText={i18n.t('adminDashboard.addCustomer.notes')}\n                value={this.state.notes}\n                onChange={this.handleChanges}\n              />\n            </Form>\n          </div>\n          {modalConfirmation}\n        </ModalWrapper>\n      )\n    );\n  }\n}\n\nexport default withKeycloak(EditCustomerModal);\n","import React, {Component} from 'react';\nimport i18n from '../../i18n';\nimport {ModalWrapper, Form, TextInput, TextArea} from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {apiAddProjectToCustomer} from '../../api/customers';\nimport {apiProjectPost, apiProjectsGet} from '../../api/projects';\nimport {authenticationChanged, isAuthenticated} from \"../../api/helpers\";\nimport ButtonBody from '../Buttons/ButtonBody';\nimport {IconPlus} from '../../helpers/icons';\n\nclass AddProjectModal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modalId: 'modal-form-project-' + props.customerId,\n      projects: {},\n      name: '',\n      description: '',\n      systemId: '',\n      contactName: '',\n      contactPhone: '',\n      contactEmail: '',\n      notes: '',\n      invalid: {},\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    //name\n    if (this.state.name === '') {\n      formIsValid = false;\n      invalid['name'] = true;\n    }\n\n    //description\n    if (this.state.description === '') {\n      formIsValid = false;\n      invalid['description'] = true;\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  //TODO: refactor to make this a validation call instead of loading all projects ahead of time\n  async getAllProjects() {\n    let projects = {}\n    try {\n      projects = await apiProjectsGet(this.props.serviceUrl);\n    } catch (err) {\n      console.log(err);\n    }\n    this.setState({\n      projects: projects.data ? projects.data : {},\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.getAllProjects();\n    }\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  async projectPost(project) {\n    if (isAuthenticated(this.props)) {\n      const result = await apiProjectPost(this.props.serviceUrl, project);\n      return await apiAddProjectToCustomer(this.props.serviceUrl, this.props.customer.id, result.data.id);\n    }\n  }\n\n  handleFormSubmit = () => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const project = {\n        name: this.state.name,\n        description: this.state.description,\n        systemId: this.state.systemId,\n        contactName: this.state.contactName,\n        contactPhone: this.state.contactPhone,\n        contactEmail: this.state.contactEmail,\n        notes: this.state.notes,\n      };\n      for (var i = 0; i < this.state.projects.length; i++) {\n        if (project.systemId === this.state.projects[i].systemId && project.systemId.trim() !== '') {\n          window.alert('That system id is already in use in another project');\n          return;\n        }\n      }\n      this.projectPost(project)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.added'),\n            submitColour: '#24a148',\n          });\n          this.props.updateCustomerList();\n          this.getAllProjects();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  clearValues = () => {\n    const projectModalElement = document.querySelector('#' + this.state.modalId);\n    if (!projectModalElement.className.includes('is-visible')) {\n      this.setState({\n        name: '',\n        description: '',\n        systemId: '',\n        contactName: '',\n        contactPhone: '',\n        contactEmail: '',\n        notes: '',\n        invalid: {},\n      });\n    }\n  };\n\n  componentDidMount() {\n    this.getAllProjects();\n\n    const modalOpenButton = document.querySelector('.add-project-button');\n    modalOpenButton.addEventListener('click', this.clearValues, false);\n  }\n\n  render() {\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>\n      </div>\n    );\n    const modalId = this.state.modalId;\n    return (\n      <ModalWrapper\n        buttonTriggerText={<ButtonBody label='buttons.addProject' icon={IconPlus}/>}\n        modalHeading={i18n.t('adminDashboard.addProject.title')}\n        buttonTriggerClassName=\"bx--btn bx--btn--ghost add-project-button\"\n        className=\"modal-form\"\n        id={modalId}\n        handleSubmit={this.handleFormSubmit}\n        primaryButtonText={i18n.t('modalText.save')}\n        secondaryButtonText={i18n.t('modalText.cancel')}\n      >\n        {modalConfirmation}\n        <div className=\"form-container\">\n          <Form onSubmit={this.handleFormSubmit}>\n            <div>\n              <span>{i18n.t('adminDashboard.addCustomer.customerName')}:</span> {this.props.customer.name}\n            </div>\n            <TextInput\n              id={'name' + modalId}\n              name=\"name\"\n              labelText={i18n.t('adminDashboard.addProject.projectName') + ' *'}\n              value={this.state.name}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['name']}\n            />\n            <TextInput\n              id={'description' + modalId}\n              name=\"description\"\n              labelText={i18n.t('adminDashboard.addProject.projectDesc') + ' *'}\n              value={this.state.description}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['description']}\n            />\n            <TextInput\n              id={'systemId' + modalId}\n              name=\"systemId\"\n              labelText={i18n.t('adminDashboard.addProject.systemId')}\n              value={this.state.systemId}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={'contactName' + modalId}\n              name=\"contactName\"\n              labelText={i18n.t('adminDashboard.addProject.contactName')}\n              value={this.state.contactName}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={'contactPhone' + modalId}\n              name=\"contactPhone\"\n              labelText={i18n.t('adminDashboard.addProject.contactPhone')}\n              value={this.state.contactPhone}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={'contactEmail' + modalId}\n              name=\"contactEmail\"\n              labelText={i18n.t('adminDashboard.addProject.contactEmail')}\n              value={this.state.contactEmail}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.email')}\n              invalid={this.state.invalid['contactEmail']}\n            />\n            <TextArea\n              id={'notes' + modalId}\n              name=\"notes\"\n              labelText={i18n.t('adminDashboard.addProject.notes')}\n              value={this.state.notes}\n              onChange={this.handleChanges}\n            />\n          </Form>\n        </div>\n        {modalConfirmation}\n      </ModalWrapper>\n    );\n  }\n}\n\nexport default withKeycloak(AddProjectModal);\n","import React from 'react';\nimport {Button} from 'carbon-components-react';\nimport ButtonBody from './ButtonBody';\n\nconst GhostButton = ({label, icon, onClick}) => {\n  return (\n    <Button kind=\"ghost\" onClick={onClick}>\n      <ButtonBody label={label} icon={icon}/>\n    </Button>\n  );\n}\n\nexport default GhostButton;\n","import {Component} from 'react';\nimport {Link} from 'react-router-dom';\nimport {AccordionItem} from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {apiCustomerGet, apiCustomerDelete} from '../../api/customers';\nimport CustomerDataTable from './CustomerDataTable';\nimport CustomerDetails from './CustomerDetails';\nimport {\n  isPortalAdminOrSupport,\n  isPortalAdmin,\n  isPortalCustomer,\n  isAuthenticated,\n  authenticationChanged\n} from '../../api/helpers';\nimport EditCustomerModal from '../Admin/EditCustomerModal';\nimport AddProjectModal from '../Admin/AddProjectModal';\nimport GhostButton from '../Buttons/GhostButton';\nimport {IconDelete, IconDetails} from '../../helpers/icons';\n\nclass CustomerAccordian extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      projects: {},\n      customer: {},\n    };\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.fetchData();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.fetchData();\n    }\n  }\n\n  async fetchData() {\n    const customerId = this.props.customerId;\n    try {\n      const customer = await apiCustomerGet(this.props.serviceUrl, customerId);\n      this.setState({\n        customer: customer.data,\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async deleteCustomer() {\n    return await apiCustomerDelete(this.props.serviceUrl, this.state.customer.id);\n  }\n\n  handleDelete() {\n    if (window.confirm('Are you sure you want to delete this customer?')) {\n      this.deleteCustomer().then(() => {\n        this.props.updateCustomerList();\n      });\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <div>\n          {isPortalCustomer() && <CustomerDetails serviceUrl={this.props.serviceUrl} customer={this.state.customer}/>}\n          <AccordionItem title={this.props.title} open={this.props.accordionOpened}>\n            <div style={{display: 'flex'}}>\n              {isPortalAdminOrSupport() && (\n                <Link style={{textDecoration: 'none'}} to={`/customer-details/${this.state.customer.id}`}>\n                  <GhostButton label='buttons.viewDetails' icon={IconDetails}/>\n                </Link>\n              )}\n              {isPortalAdmin() && (\n                <div style={{display: 'flex'}}>\n                  <EditCustomerModal\n                    serviceUrl={this.props.serviceUrl}\n                    customer={this.state.customer}\n                    key={this.state.customer.id}\n                    updateCustomerList={this.props.updateCustomerList}\n                    customerId={this.state.customer.id}\n                  />\n                  <AddProjectModal serviceUrl={this.props.serviceUrl}\n                                   customerId={this.props.customerId}\n                                   customer={this.state.customer}\n                                   updateCustomerList={this.props.updateCustomerList}/>\n\n                  <GhostButton label='buttons.delete' icon={IconDelete} onClick={this.handleDelete}/>\n                </div>\n              )}\n            </div>\n            <CustomerDataTable\n              key={new Date().getTime()}\n              serviceUrl={this.props.serviceUrl}\n              customer={this.state.customer}\n              locale={this.props.locale}\n              updateCustomerList={this.props.updateCustomerList}\n            />\n          </AccordionItem>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withKeycloak(CustomerAccordian);\n","import React from 'react';\nimport i18n from '../../i18n';\nimport {Accordion, InlineLoading, PaginationNav, Search, Tile} from 'carbon-components-react';\nimport AddCustomerModal from './AddCustomerModal';\nimport AddPartnerModal from './AddPartnerModal';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {apiCustomersGet} from '../../api/customers';\nimport CustomerAccordian from '../Customer/CustomerAccordian';\nimport {\n  authenticationChanged,\n  isPortalAdmin,\n  isPortalSupport,\n  isPortalPartner,\n  isPortalUser,\n  isAuthenticated,\n} from '../../api/helpers';\n\nclass AdminDashboard extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      customers: {},\n      role: '',\n      filteredCustomers: {},\n      currentPage: 0,\n      test: '',\n      loading: true\n    };\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.fetchData();\n    }\n  }\n\n  async fetchData() {\n    if (isAuthenticated(this.props)) {\n      let customers = {};\n      try {\n        customers = await apiCustomersGet(this.props.serviceUrl);\n      } catch (err) {\n        console.log(err);\n      }\n\n      this.setState({\n        customers: customers.data ? customers.data : {},\n        filteredCustomers: customers.data ? customers.data : {},\n        loading: false\n      });\n    }\n  }\n\n  handleSearch = event => {\n    if (event.key === 'Enter') {\n      //Note: should refactor this to perform filtering in db\n      const newFilteredState = this.state.customers.filter(customer =>\n        customer.name.toLowerCase().includes(event.target.value.toLowerCase())\n      );\n      this.setState({\n        filteredCustomers: newFilteredState,\n        currentPage: 0,\n      });\n    } else {\n      if (event.target.value === '' || event.target.value === undefined) {\n        this.setState({\n          filteredCustomers: this.state.customers,\n        });\n      }\n    }\n  };\n\n  updateCustomerList = () => {\n    this.fetchData();\n  };\n\n  render() {\n    var numberOfPages = 1;\n    if (Object.keys(this.state.filteredCustomers).length !== 0) {\n      numberOfPages = Math.ceil(this.state.filteredCustomers.length / 5);\n    } else {\n      numberOfPages = 1;\n    }\n\n    const props = () => ({\n      loop: Boolean(false),\n      page: Number(this.state.currentPage),\n      totalItems: Number(numberOfPages),\n      itemsShown: Number(1),\n      onChange: event => this.setState({ currentPage: event }),\n    });\n    const customerCount = Object.keys(this.state.customers).length;\n\n    return (\n      <div className=\"admin-dashboard\">\n        {isPortalAdmin() || isPortalSupport() || isPortalPartner() ? (\n          <Tile>\n            <p className=\"title\">{i18n.t('adminDashboard.allCustomers')}</p>\n            <div className=\"bx--row\">\n              <div className=\"bx--col\">\n                <Search\n                  onChange={this.handleSearch}\n                  id=\"search\"\n                  placeholder={i18n.t('adminDashboard.searchText')}\n                  labelText={i18n.t('adminDashboard.searchLabel')}\n                  onKeyPress={this.handleSearch}\n                />\n              </div>\n              {isPortalAdmin() ? (\n                <div className=\"bx--col\">\n                  <div>\n                    <AddPartnerModal serviceUrl={this.props.serviceUrl} updateCustomerList={this.updateCustomerList}/>\n                    <AddCustomerModal serviceUrl={this.props.serviceUrl} updateCustomerList={this.updateCustomerList}/>\n                  </div>\n                </div>\n              ) : null}\n            </div>\n          </Tile>\n        ) : null}\n\n        {this.state.loading && <InlineLoading/>}\n        {!this.state.loading && (\n          <div className=\"form-container\">\n            <Accordion>\n              {(customerCount !== 0)\n                ? this.state.filteredCustomers.map((customer, index) => {\n                  //Pagination for Admin and Support roles (5 items per page)\n                  //Note: eventually this should be pushed down into paginated microservice calls\n                  var indexOfLastItem = (this.state.currentPage + 1) * 5 - 1;\n                  var firstIndexOfCurrentPage = this.state.currentPage * 5;\n                  var accordionOpened = this.state.customers.length === 1;\n\n                  if (isPortalUser()) {\n                    if (index >= firstIndexOfCurrentPage && index <= indexOfLastItem) {\n                      return (\n                        <CustomerAccordian\n                          key={customer.id}\n                          serviceUrl={this.props.serviceUrl}\n                          customerId={customer.id}\n                          title={customer.name}\n                          updateCustomerList={this.updateCustomerList}\n                          locale={this.props.locale}\n                          accordionOpened={accordionOpened}\n                        />\n                      );\n                    } else {\n                      return null;\n                    }\n                  } else {\n                    return null;\n                  }\n                })\n                : null}\n            </Accordion>\n            {customerCount > 1 && (\n              <PaginationNav {...props()} className=\"pagination-right\"/>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default withKeycloak(AdminDashboard);\n","import { getDefaultOptions, request, getUrl } from './helpers';\n\nconst resource = 'api/tickets';\n\nexport const apiTicketDelete = async (serviceUrl, id) => {\n  const url = `${serviceUrl}/${resource}/${id}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\nexport const apiTicketsGet = async serviceUrl => {\n  const url = getUrl(`${serviceUrl}/${resource}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiTicketPost = async (serviceUrl, ticket) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n    body: ticket ? JSON.stringify(ticket) : null,\n  };\n  return request(url, options);\n};\n\nconst jiraResource = 'api/tickets/ticketingsystem';\n\nexport const apiJiraTicketsGet = async (serviceUrl, projectId) => {\n  const url = `${serviceUrl}/${jiraResource}/${projectId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiJiraTicketPost = async (serviceUrl, projectId, ticket) => {\n  const url = `${serviceUrl}/${jiraResource}/${projectId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n    body: ticket ? JSON.stringify(ticket) : null,\n  };\n  return request(url, options);\n};\n","import React, { Component } from 'react';\nimport {\n  DataTable,\n  InlineLoading,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableHeader,\n  TableBody,\n  TableCell,\n  PaginationNav,\n} from 'carbon-components-react';\nimport {apiJiraTicketsGet} from '../../api/tickets';\nimport {apiCurrentTicketingSystemGet} from '../../api/ticketingsystem';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {apiProjectGet} from '../../api/projects';\nimport {authenticationChanged, isAuthenticated, isPortalUser} from '../../api/helpers';\nimport i18n from '../../i18n';\nimport {Link} from 'react-router-dom';\nimport GhostButton from '../Buttons/GhostButton';\nimport {IconDetails, IconPlus} from '../../helpers/icons';\n\nclass TicketList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tickets: {},\n      project: {},\n      ticketingSystem: {},\n      currentPage: 0,\n      loading: true\n    };\n    this.headerData = [\n      {\n        header: i18n.t('ticketDetails.issue'),\n        key: 'issue',\n      },\n      {\n        header: i18n.t('ticketDetails.summary'),\n        key: 'summary',\n      },\n      {\n        header: i18n.t('ticketDetails.status'),\n        key: 'status',\n      },\n      {\n        header: i18n.t('ticketDetails.type'),\n        key: 'type',\n      },\n      {\n        header: i18n.t('ticketDetails.priority'),\n        key: 'priority',\n      },\n      {\n        header: i18n.t('ticketDetails.created'),\n        key: 'created',\n      },\n      {\n        header: i18n.t('ticketDetails.updated'),\n        key: 'updated',\n      },\n      {\n        header: i18n.t('ticketDetails.link'),\n        key: 'link',\n      },\n    ];\n  }\n\n  async fetchData() {\n    if (isPortalUser()) {\n      try {\n        const project = (await apiProjectGet(this.props.serviceUrl, this.props.projectId)).data;\n        const ticketingSystem = await apiCurrentTicketingSystemGet(this.props.serviceUrl);\n        const tickets = await apiJiraTicketsGet(this.props.serviceUrl, project.id);\n        this.setState({\n          tickets: tickets,\n          project: project,\n          ticketingSystem: ticketingSystem,\n          loading: false\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.fetchData();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.fetchData();\n    }\n  }\n\n  render() {\n    var numberOfPages = 1;\n    if (Object.keys(this.state.tickets).length !== 0) {\n      numberOfPages = Math.ceil(this.state.tickets.data.length / 10);\n    }\n\n    const paginationProps = () => ({\n      loop: Boolean(false),\n      page: Number(this.state.currentPage),\n      totalItems: Number(numberOfPages),\n      itemsShown: Number(1),\n      onChange: event => this.setState({currentPage: event}),\n    });\n    const ticketSystemUrl = this.state.ticketingSystem.url;\n    const ticketingSystemBaseUrl = ticketSystemUrl != null ? ticketSystemUrl.substr(0, ticketSystemUrl.indexOf('/rest')) : null;\n    const ticketCount = Object.keys(this.state.tickets).length;\n\n    return (\n      <div className=\"bx--tile\">\n        {this.state.project.id && (\n          <div>\n            {/*View All Ticket*/}\n            <a\n              href={ticketingSystemBaseUrl + '/issues/?jql=Organizations=' + this.state.project.systemId}\n              style={{textDecoration: 'none'}}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              <GhostButton label='buttons.viewAllTickets' icon={IconDetails}/>\n            </a>\n            {/*Open Ticket*/}\n            <Link style={{textDecoration: 'none'}} to={`/ticket/${this.state.project.id}`}>\n              <GhostButton label='buttons.openTicket' icon={IconPlus}/>\n            </Link>\n          </div>\n        )}\n        {this.state.loading && <InlineLoading/>}\n        {!this.state.loading && (\n          <>\n            <DataTable rows={[{id: '1'}]} headers={this.headerData}>\n              {({rows, headers, getHeaderProps, getTableProps}) => (\n                <TableContainer title={i18n.t('ticketDetails.listOfTickets')}>\n                  <Table {...getTableProps()}>\n                    <TableHead>\n                      <TableRow>\n                        {headers.map(header => (\n                          <TableHeader {...getHeaderProps({header})}>{header.header}</TableHeader>\n                        ))}\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {ticketCount !== 0 ? (\n                        this.state.tickets.data.map((ticket, index) => {\n                          const indexOfLastItem = (this.state.currentPage + 1) * 10 - 1;\n                          const firstIndexOfCurrentPage = this.state.currentPage * 10;\n                          const ticketUrl = ticketingSystemBaseUrl + '/browse/' + ticket.systemId;\n\n                          if (index >= firstIndexOfCurrentPage && index <= indexOfLastItem) {\n                            return (\n                              <TableRow key={ticket.id}>\n                                <TableCell>\n                                  <a href={ticketUrl} target=\"_blank\" rel=\"noreferrer\">\n                                    {ticket.systemId}\n                                  </a>\n                                </TableCell>\n                                <TableCell>{ticket.summary}</TableCell>\n                                <TableCell>{ticket.status}</TableCell>\n                                <TableCell>{ticket.type}</TableCell>\n                                <TableCell>{ticket.priority}</TableCell>\n                                <TableCell>{new Date(ticket.createDate).toDateString()}</TableCell>\n                                <TableCell>{new Date(ticket.updateDate).toDateString()}</TableCell>\n                                <TableCell>\n                                  <a href={ticketUrl} target=\"_blank\" rel=\"noreferrer\">\n                                    {i18n.t('ticketDetails.viewTicket')}\n                                  </a>\n                                </TableCell>\n                              </TableRow>\n                            );\n                          } else {\n                            return null;\n                          }\n                        })\n                      ) : (\n                        <TableRow/>\n                      )}\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n              )}\n            </DataTable>\n            {ticketCount > 10 && (\n              <PaginationNav {...paginationProps()} className=\"pagination-right\"/>\n            )}\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default withKeycloak(TicketList);\n","import React from 'react';\nimport TicketList from './TicketList';\nimport {Tile} from 'carbon-components-react';\nimport {apiSubscriptionGet, formatStartDate, formatEndDate} from '../../api/subscriptions';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {apiGetProjectUsers, apiProjectGet} from '../../api/projects';\nimport {isPortalAdminOrSupport, isPortalUser, authenticationChanged} from '../../api/helpers';\nimport i18n from '../../i18n';\nimport Breadcrumbs from \"../Breadcrumbs/Breadcrumbs\";\n\nconst subscriptionData = {\n  type: 'Product Support Subscription Entando Platform',\n  license: 'Free Commercial Open Source',\n};\n\nclass Subscription extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      subscription: {},\n      users: {},\n      project: {},\n      customer: {},\n    };\n  }\n\n  async fetchData() {\n    if (isPortalUser()) {\n      try {\n        let users = {};\n        let project = {};\n        const subscription = await apiSubscriptionGet(this.props.serviceUrl, this.props.match.params.id);\n        if (subscription.data.project) {\n          project = await apiProjectGet(this.props.serviceUrl, subscription.data.project.id);\n          users = await apiGetProjectUsers(this.props.serviceUrl, project.data.id);\n        }\n        this.setState({\n          subscription: subscription,\n          project: project,\n          customer: project.customer,\n          users: users,\n          loading: false,\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  }\n\n  updateSubscription = () => {\n    this.fetchData();\n  };\n\n  componentDidMount() {\n    if (isPortalUser()) {\n      this.fetchData();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps) && isPortalUser()) {\n      this.fetchData();\n    }\n  }\n\n  render() {\n    const { type, license } = subscriptionData;\n\n    if (!this.state.loading) {\n      if (isPortalUser()) {\n        if (Object.keys(this.state.subscription).length !== 0 && Object.keys(this.state.project).length !== 0) {\n          const project = this.state.project.data;\n          const subscription = this.state.subscription.data;\n          return (\n            <div className=\"subscription-details\">\n              <div>\n                <Breadcrumbs project={project} subscription={subscription} locale={this.props.locale}/>\n                <Tile>\n                  <div className=\"bx--grid\">\n                    <div className=\"bx--row\">\n                      <div className=\"bx--col\">\n                        <div>\n                          <strong>{i18n.t('customerDashboard.customerName')} sachinTest:</strong> {project.customer.name}\n                        </div>\n                        <div>\n                          <strong>{i18n.t('customerDashboard.projectName')}:</strong> {project.name}\n                        </div>\n                        <div>\n                          <strong>{i18n.t('subscriptionDetails.description')}:</strong> {subscription.project.description}\n                        </div>\n                        <div>\n                          <strong>{i18n.t('subscriptionDetails.partners')}:</strong>\n                          {project !== '' && Object.keys(project.partners).length !== 0 ? (\n                            <>\n                              {project.partners.map((partner, index) => (\n                                <div key={index}>\n                                  {' '}\n                                  {index === project.partners.length - 1 ? partner.name : partner.name + ', '}{' '}\n                                </div>\n                              ))}\n                            </>\n                          ) : (\n                            <> {i18n.t('userMessages.none')} </>\n                          )}\n                        </div>\n                        <div>\n                          <strong>{i18n.t('subscriptionDetails.type')}:</strong> {type}\n                        </div>\n                        {isPortalAdminOrSupport() ? (\n                          <div>\n                            <strong>{i18n.t('subscriptionDetails.notes')}:</strong> {subscription.notes}\n                          </div>\n                        ) : null}\n                      </div>\n                      <div className=\"bx--col\">\n                        <div>\n                          <strong>{i18n.t('subscriptionDetails.status')}:</strong> {subscription.status}\n                        </div>\n                        <div>\n                          <strong>{i18n.t('subscriptionDetails.level')}:</strong> {subscription.level}\n                        </div>\n                        <div>\n                          <strong>{i18n.t('subscriptionDetails.startDate')}:</strong>{' '}\n                          {formatStartDate(subscription.startDate)}\n                        </div>\n                        <div>\n                          <strong>{i18n.t('subscriptionDetails.endDate')}:</strong>{' '}\n                          {formatEndDate(subscription.startDate, subscription.lengthInMonths)}\n                        </div>\n                        <div>\n                          <strong>{i18n.t('subscriptionDetails.license')}:</strong> {license}\n                        </div>\n                        <div>\n                          <strong>{i18n.t('subscriptionDetails.assignedUsers')}:</strong>\n                          {this.state.users.data !== '' && Object.keys(this.state.users.data).length !== 0 ? (\n                            <>\n                              {this.state.users.data.map((user, index) => (\n                                <div\n                                  key={index}> {index === this.state.users.data.length - 1 ? user.username : user.username + ', '} </div>\n                              ))}\n                            </>\n                          ) : (\n                            <> {i18n.t('userMessages.none')} </>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </Tile>\n                <br/>\n                <TicketList projectId={project.id} serviceUrl={this.props.serviceUrl} locale={this.props.locale}/>\n              </div>\n            </div>\n          );\n        } else {\n          return <div>{i18n.t('userMessages.unauthorized')}</div>;\n        }\n      } else {\n        return <div>{i18n.t('userMessages.unauthorized')}</div>;\n      }\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default withKeycloak(Subscription);\n","import React from 'react';\nimport {Tile} from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {apiCustomerGet} from '../../api/customers';\nimport {authenticationChanged, isAuthenticated, isPortalAdminOrSupport} from '../../api/helpers';\nimport i18n from '../../i18n';\nimport Breadcrumbs from '../Breadcrumbs/Breadcrumbs';\nimport CustomerDataTable from './CustomerDataTable';\n\nclass CustomerProjectList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      customer: {},\n    };\n  }\n\n  async fetchData() {\n    if (isAuthenticated(this.props)) {\n      try {\n        const customer = await apiCustomerGet(this.props.serviceUrl, this.props.match.params.id);\n        this.setState({\n          customer: customer.data,\n          loading: false,\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      if (isPortalAdminOrSupport()) {\n        this.fetchData();\n      }\n    }\n  }\n\n  render() {\n    if (!this.state.loading) {\n      const customer = this.state.customer;\n      if (customer) {\n        return (\n          <div className=\"project-list\">\n            <Breadcrumbs customer={customer} locale={this.props.locale}/>\n            <Tile>\n              <div className=\"bx--grid\">\n                <div className=\"bx--row\">\n                  <div className=\"bx--col\">\n                    <p>\n                      <strong>{i18n.t('customerDetails.id')}: </strong> {customer.id}\n                    </p>\n                    <p>\n                      <strong>{i18n.t('customerDetails.name')}: </strong> {customer.name}\n                    </p>\n                    {isPortalAdminOrSupport() &&\n                    <p>\n                      <strong>{i18n.t('customerDetails.notes')}: </strong> {customer.notes}\n                    </p>\n                    }\n                  </div>\n                  <div className=\"bx--col\">\n                    <p>\n                      <strong>{i18n.t('customerDetails.contactName')}: </strong> {customer.contactName}\n                    </p>\n                    <p>\n                      <strong>{i18n.t('customerDetails.contactPhone')}: </strong> {customer.contactPhone}\n                    </p>\n                    <p>\n                      <strong>{i18n.t('customerDetails.contactEmail')}: </strong> {customer.contactEmail}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </Tile>\n            <CustomerDataTable serviceUrl={this.props.serviceUrl} customer={customer}\n                               locale={this.props.locale}/>\n          </div>\n        );\n      } else {\n        return <p>{i18n.t('userMessages.loading')}...</p>;\n      }\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default withKeycloak(CustomerProjectList);\n","import React, {Component} from 'react';\nimport {\n  DataTable,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableHeader,\n  TableBody,\n  TableCell,\n  Button\n} from 'carbon-components-react';\nimport '../../../index.scss';\nimport withKeycloak from '../../../auth/withKeycloak';\nimport i18n from '../../../i18n';\nimport {isAuthenticated, authenticationChanged} from '../../../api/helpers';\nimport {apiDeleteSubscriptionFromProject, apiGetProjectSubscriptions, apiProjectGet} from '../../../api/projects';\nimport {formatEndDate, formatStartDate} from '../../../api/subscriptions';\nimport Breadcrumbs from \"../../Breadcrumbs/Breadcrumbs\";\nimport {Link} from 'react-router-dom';\n\nclass ManageSubscriptions extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      projectId: '',\n      project: {},\n      subscriptions: [],\n    };\n    this.headerData = [\n      {\n        header: i18n.t('projectDetails.id'),\n        key: 'id',\n      },\n      {\n        header: i18n.t('subscriptionDetails.status'),\n        key: 'status',\n      },\n      {\n        header: i18n.t('projectDetails.entandoVersion'),\n        key: 'entandoVersion',\n      },\n      {\n        header: i18n.t('subscriptionDetails.level'),\n        key: 'level',\n      },\n      {\n        header: i18n.t('subscriptionDetails.startDate'),\n        key: 'startDate',\n      },\n      {\n        header: i18n.t('subscriptionDetails.endDate'),\n        key: 'endDate',\n      },\n      {\n        header: i18n.t('subscriptionDetails.lengthInMonths'),\n        key: 'lengthInMonths',\n      },\n      {\n        header: i18n.t('subscriptionDetails.notes'),\n        key: 'notes',\n      },\n      {\n        header: i18n.t('customerDashboard.action'),\n        key: 'action',\n      },\n    ];\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.fetchData();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.fetchData();\n    }\n  }\n\n  async fetchData() {\n    if (isAuthenticated(this.props)) {\n      const projectId = this.props.match.params.id;\n\n      let project = {};\n      let subscriptions = {};\n      if (projectId != null) {\n        project = (await apiProjectGet(this.props.serviceUrl, projectId)).data;\n        subscriptions = (await apiGetProjectSubscriptions(this.props.serviceUrl, projectId)).data;\n      }\n\n      this.setState({\n        projectId: projectId,\n        project: project,\n        subscriptions: subscriptions,\n      });\n    }\n  }\n\n  async deleteSubscription(subscriptionId) {\n    if (isAuthenticated(this.props)) {\n      return await apiDeleteSubscriptionFromProject(this.props.serviceUrl, this.state.projectId, subscriptionId);\n    }\n  }\n\n  handleDeleteSubscription = (e, id) => {\n    e.preventDefault();\n    if (window.confirm(i18n.t('submitMessages.confirmDelete'))) {\n      console.log('confirmed to delete', id);\n      this.deleteSubscription(id)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.deleted'),\n            submitColour: '#24a148',\n          });\n          this.fetchData();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  render() {\n    const project = this.state.project;\n    return (\n      <div id=\"entando-customer-portal\">\n        <Breadcrumbs project={project} locale={this.props.locale}/>\n        <h5>{project.name}</h5>\n        <Link to={`/subscription/${this.state.projectId}`} style={{textDecoration: 'none'}}>\n          <Button kind=\"ghost\" style={{display: 'block', width: '100%'}} value=\"Add Subscription\">\n            {i18n.t('buttons.addSubscription')}\n          </Button>\n        </Link>\n        <DataTable rows={[{id: '1'}]} headers={this.headerData}>\n          {({headers, getHeaderProps, getTableProps}) => (\n            <TableContainer>\n              <Table {...getTableProps()}>\n                <TableHead>\n                  <TableRow>\n                    {headers.map(header => (\n                      <TableHeader {...getHeaderProps({header})}>{header.header}</TableHeader>\n                    ))}\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {Object.keys(this.state.subscriptions).length !== 0 &&\n                  this.state.subscriptions.map((subscription, index) => (\n                    <TableRow key={index}>\n                      <TableCell>{subscription.id}</TableCell>\n                      <TableCell>{subscription.status}</TableCell>\n                      <TableCell>{subscription.entandoVersion && subscription.entandoVersion.name}</TableCell>\n                      <TableCell>{subscription.level}</TableCell>\n                      <TableCell>{formatStartDate(subscription.startDate)}</TableCell>\n                      <TableCell>{formatEndDate(subscription.startDate, subscription.lengthInMonths)}</TableCell>\n                      <TableCell>{subscription.lengthInMonths}</TableCell>\n                      <TableCell>{subscription.notes}</TableCell>\n                      <TableCell>\n                        <Link to={`/subscription/${this.state.projectId}/${subscription.id}`}\n                              style={{textDecoration: 'none'}}>\n                          <Button kind=\"ghost\" style={{display: 'block', width: '100%'}} value=\"Edit\">\n                            {i18n.t('buttons.edit')}\n                          </Button>\n                        </Link>\n                        <Button\n                          kind=\"ghost\"\n                          onClick={event => this.handleDeleteSubscription(event, subscription.id)}\n                          className=\"button-warning\"\n                        >\n                          {i18n.t('buttons.delete')}\n                        </Button>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          )}\n        </DataTable>\n      </div>\n    );\n  }\n}\n\nexport default withKeycloak(ManageSubscriptions);\n","import React, {Component} from 'react';\nimport i18n from '../../i18n';\nimport {\n  Form,\n  TextInput,\n  Select,\n  SelectItem,\n  Button,\n  DatePicker,\n  DatePickerInput,\n  TextArea\n} from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {apiProjectGet} from '../../api/projects';\nimport {\n  apiProjectSubscriptionPost,\n  apiProjectSubscriptionPut,\n  apiRenewSubscription,\n  apiSubscriptionGet,\n  stripTime,\n} from '../../api/subscriptions';\nimport {apiProductVersionsGet} from '../../api/productVersion';\nimport {authenticationChanged, isAuthenticated, isPortalAdmin, isPortalUser} from '../../api/helpers';\nimport {apiAddSubscriptionToProject} from '../../api/projects';\nimport moment from 'moment';\nimport Breadcrumbs from \"../Breadcrumbs/Breadcrumbs\";\n\nconst FORM_TYPE = {\n  new: 'new',\n  renewal: 'renewal',\n  edit: 'edit',\n};\n\nconst SUBSCRIPTION_LEVEL = {\n  GOLD: 'GOLD',\n  PLATINUM: 'PLATINUM',\n};\n\nconst SUBSCRIPTION_STATUS = {\n  requested: 'REQUESTED',\n  pending: 'PENDING',\n  active: 'ACTIVE',\n  expired: 'EXPIRED',\n};\n\nclass SubscriptionForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      project: {},\n      projectId: '',\n      subscription: {},\n      startDate: '',\n      level: 'PLATINUM',\n      lengthInMonths: '',\n      notes: '',\n      entandoVersionId: '',\n      status: '',\n      formType: 'new',\n      invalid: {},\n      productVersions: [],\n      submitSuccess: false,\n      submitError: false,\n      submitColour: 'black',\n    };\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.fetchData();\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.fetchData();\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  async fetchData() {\n    if (!isPortalUser()) {\n      return;\n    }\n\n    const serviceUrl = this.props.serviceUrl;\n\n    const params = this.props.match.params;\n    const subscriptionId = params.subscriptionId;\n    let projectId = params.projectId;\n\n    let subscription = {};\n    let project = {};\n    let formType = FORM_TYPE.new;\n    let status = '';\n    const isAdmin = isPortalAdmin();\n\n    if (typeof subscriptionId !== \"undefined\") {\n      subscription = (await apiSubscriptionGet(serviceUrl, subscriptionId)).data;\n      status = isAdmin ? subscription.status : SUBSCRIPTION_STATUS.requested;\n      formType = isAdmin ? FORM_TYPE.edit : FORM_TYPE.renewal;\n      project = subscription.project;\n    } else if (projectId !== null) {\n      project = (await apiProjectGet(serviceUrl, projectId)).data;\n      status = isAdmin ? SUBSCRIPTION_STATUS.pending : SUBSCRIPTION_STATUS.requested;\n    } else {\n      console.log('Unable to load project and/or subscription');\n      return;\n    }\n\n    const productVersions = (await apiProductVersionsGet(serviceUrl)).data;\n\n    this.setState({\n      subscription: subscription,\n      level: subscription.level ? subscription.level : '',\n      entandoVersionId: subscription.entandoVersion ? subscription.entandoVersion.id : '',\n      startDate: stripTime(subscription.startDate),\n      lengthInMonths: subscription.lengthInMonths ? subscription.lengthInMonths : '',\n      notes: subscription.notes ? subscription.notes : '',\n      status: status,\n      formType: formType,\n      project: project,\n      projectId: projectId,\n      productVersions: productVersions,\n    });\n  }\n\n  isNumeric(str) {\n    return !isNaN(str) && !isNaN(parseInt(str));\n  }\n\n  handleValidation() {\n    let invalid = {};\n\n    if (!this.state.startDate || !this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\n      invalid['startDate'] = true;\n    }\n\n    if (!this.state.lengthInMonths || !this.isNumeric(this.state.lengthInMonths)) {\n      invalid['lengthInMonths'] = true;\n    }\n\n    if (!this.state.level) {\n      invalid['level'] = true;\n    }\n\n    if (this.state.entandoVersionId === '') {\n      invalid['entandoVersionId'] = true;\n    }\n\n    this.setState({ invalid: invalid });\n    return Object.keys(invalid).length === 0;\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n    this.setState({\n      submitSuccess: false,\n      submitError: false,\n    });\n  };\n\n  handleStartDateChange = date => {\n    let formatted = '';\n    if (date && date[0]) {\n      formatted = moment(date[0].toISOString()).format('MM/DD/YYYY');\n    }\n    this.setState({\n      startDate: formatted,\n    });\n  };\n\n  updateStateForSuccess(success) {\n    if (success) {\n      this.setState({\n        submitSuccess: true,\n        submitError: false,\n        submitColour: '#24a148',\n      });\n    } else {\n      this.setState({\n        submitSuccess: false,\n        submitError: true,\n        submitColour: '#da1e28',\n      });\n    }\n  }\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    this.setState({\n      submitSuccess: false,\n      submitError: false,\n    });\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const formType = this.state.formType;\n      const serviceUrl = this.props.serviceUrl;\n      const subscriptionRequest = this.stateToSubscription();\n\n      if (formType === FORM_TYPE.edit) {\n        apiProjectSubscriptionPut(serviceUrl, subscriptionRequest)\n          .then(() => {\n            this.updateStateForSuccess(true);\n          })\n          .catch(() => {\n            this.updateStateForSuccess(false);\n          });\n      } else if (formType === FORM_TYPE.new) {\n        this.newSubscription(subscriptionRequest)\n          .then(res => {\n            apiAddSubscriptionToProject(serviceUrl, this.state.projectId, res.data.id);\n            this.updateStateForSuccess(true);\n          })\n          .catch(() => {\n            this.updateStateForSuccess(false);\n          });\n      } else if (formType === FORM_TYPE.renewal) {\n        this.renewSubscription(subscriptionRequest)\n          .then(res => {\n            apiAddSubscriptionToProject(serviceUrl, this.state.projectId, res.data.id);\n            this.updateStateForSuccess(true);\n          })\n          .catch(() => {\n            this.updateStateForSuccess(false);\n          });\n      } else {\n        console.log('Illegal operation');\n      }\n    }\n  };\n\n  stateToSubscription() {\n    return {\n      entandoVersionId: this.state.entandoVersionId,\n      projectId: this.state.projectId,\n      renewal: this.state.formType === FORM_TYPE.renewal,\n      projectSubscription: {\n        id: this.state.subscription.id,\n        startDate: new Date(this.state.startDate),\n        lengthInMonths: this.state.lengthInMonths,\n        level: this.state.level,\n        status: this.state.status.toUpperCase(),\n        notes: this.state.notes,\n      },\n    };\n  }\n\n  async newSubscription(request) {\n    return await apiProjectSubscriptionPost(this.props.serviceUrl, request);\n  }\n\n  async renewSubscription(request) {\n    return await apiRenewSubscription(this.props.serviceUrl, request);\n  }\n\n  setupFormComponents() {\n    const subscriptionLevelList = Object.entries(SUBSCRIPTION_LEVEL).map(([key, value]) => (\n      <SelectItem key={key} text={value} value={key}>\n        {value}\n      </SelectItem>\n    ));\n    subscriptionLevelList.unshift(<SelectItem key=\"-1\" text={i18n.t('subscriptionForm.chooseLevel')} value=\"\"/>);\n\n    const versionList = this.state.productVersions.map(version => {\n      // only allow the user to choose from active entando versions\n      if (version.status) {\n        return (\n          <SelectItem key={version.id} text={version.name} value={version.id}>\n            {version.name}\n          </SelectItem>\n        );\n      } else {\n        return null;\n      }\n    });\n    versionList.unshift(<SelectItem key=\"-1\" text={i18n.t('subscriptionForm.chooseVersion')} value=\"\"/>);\n\n    const statusList = Object.entries(SUBSCRIPTION_STATUS).map(([key, value]) => (\n      <SelectItem key={key} text={value} value={value}>\n        {value}\n      </SelectItem>\n    ));\n\n    return {subscriptionLevelList, versionList, statusList};\n  }\n\n  renderForm() {\n    const {subscriptionLevelList, versionList, statusList} = this.setupFormComponents();\n    return (\n      <div>\n        <div className=\"bx--row\">\n          <div className=\"bx--col\">\n            <div>\n              <span>{i18n.t('subscriptionForm.projectName')}:</span> {this.state.project.name}\n            </div>\n            <Select\n              id=\"status\"\n              name=\"status\"\n              labelText={i18n.t('subscriptionForm.subscriptionStatus')}\n              value={this.state.status}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['status']}\n              disabled={!isPortalAdmin()}\n            >\n              {statusList}\n            </Select>\n            <Select\n              id=\"level\"\n              name=\"level\"\n              labelText={i18n.t('subscriptionForm.subscriptionLevel') + ' *'}\n              value={this.state.level || ''}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['level']}\n            >\n              {subscriptionLevelList}\n            </Select>\n            <Select\n              id=\"entandoVersionId\"\n              name=\"entandoVersionId\"\n              labelText={i18n.t('subscriptionForm.entandoVersion') + ' *'}\n              value={this.state.entandoVersionId}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['entandoVersionId']}\n            >\n              {versionList}\n            </Select>\n          </div>\n          <div className=\"bx--col\">\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" value={this.state.startDate}\n                        onChange={this.handleStartDateChange}>\n              <DatePickerInput\n                id=\"startDate\"\n                name=\"startDate\"\n                placeholder=\"mm/dd/yyyy\"\n                labelText={i18n.t('subscriptionForm.subscriptionStartDate')}\n                type=\"text\"\n                invalidText={i18n.t('validation.invalid.date')}\n                invalid={this.state.invalid['startDate']}\n              />\n            </DatePicker>\n            <TextInput\n              id=\"lengthInMonths\"\n              name=\"lengthInMonths\"\n              labelText={i18n.t('subscriptionForm.subscriptionLength') + ' *'}\n              value={this.state.lengthInMonths}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.number')}\n              invalid={this.state.invalid['lengthInMonths']}\n            />\n            {isPortalAdmin() && (\n              <TextArea\n                id={'notes'}\n                name=\"notes\"\n                labelText={i18n.t('adminDashboard.addProject.notes')}\n                value={this.state.notes}\n                onChange={this.handleChanges}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  successErrorMessage() {\n    const isAdmin = isPortalAdmin();\n    const { subscriptionType, submitSuccess, submitError } = this.state;\n\n    if (subscriptionType === 'new') {\n      if (submitSuccess) {\n        return isAdmin ? this.createFormMessage('adminSubmitNewSuccess') : this.createFormMessage('customerSubmitSuccess');\n      } else if (submitError) {\n        return this.createFormMessage('newSubError');\n      }\n    } else {\n      if (submitSuccess) {\n        return isAdmin ? this.createFormMessage('adminRenewNewSuccess') : this.createFormMessage('customerSubmitSuccess');\n      } else if (submitError) {\n        return this.createFormMessage('renewSubError');\n      }\n    }\n  }\n\n  createFormMessage(subMessageKey) {\n    return <p style={{ color: this.state.submitColour }}>{i18n.t(`subscriptionForm.${subMessageKey}`)}</p>;\n  }\n\n  render() {\n    const formType = this.state.formType;\n    let formLabelKey = 'subscriptionForm.newSubscription';\n    if (formType !== 'new') {\n      formLabelKey = isPortalAdmin() ? 'subscriptionForm.editSubscription' : 'subscriptionForm.renewSubscription';\n    }\n\n    if (!this.state.loading) {\n      if (isPortalUser()) {\n        return (\n          <div id=\"entando-customer-portal\">\n            <Breadcrumbs project={this.state.project} subscription={this.state.subscription}\n                         locale={this.props.locale}/>\n            <div className=\"form-container\">\n              {this.successErrorMessage()}\n              <Form onSubmit={this.handleFormSubmit}>\n                <div className=\"bx--grid\">\n                  <div className=\"bx--row\">\n                    <div className=\"bx--col\">\n                      <strong>{i18n.t(formLabelKey)}</strong>\n                    </div>\n                  </div>\n                  {this.renderForm()}\n                  <Button kind=\"primary\" tabIndex={0} type=\"submit\">\n                    {' '}\n                    {i18n.t('buttons.submit')}\n                  </Button>\n                </div>\n              </Form>\n            </div>\n          </div>\n        );\n      } else {\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\n      }\n    }\n    // Loading\n    else {\n      return null;\n    }\n  }\n}\n\nexport default withKeycloak(SubscriptionForm);\n","import React, {Component} from 'react';\nimport i18n from '../../i18n';\nimport {Form, Select, SelectItem, Button, TextArea, TextInput} from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {apiProjectGet} from '../../api/projects';\nimport {apiJiraTicketPost} from '../../api/tickets';\nimport {authenticationChanged, getActiveSubscription, isAuthenticated, isPortalUser} from '../../api/helpers';\nimport Breadcrumbs from \"../Breadcrumbs/Breadcrumbs\";\n\nclass OpenTicketForm extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: true,\n      project: {},\n      role: '',\n      invalid: {},\n      submitMsg: '',\n      submitColour: 'black',\n      //form fields\n      type: 'Support',\n      priority: 'Medium',\n      status: 'To Do',\n      summary: '',\n      description: '',\n    };\n    this.types = ['Support', 'New Feature', 'Bug'];\n    this.priorities = ['Critical', 'High', 'Medium', 'Low'];\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.fetchData();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.fetchData();\n    }\n  }\n\n  async fetchData() {\n    if (!isPortalUser()) {\n      return;\n    }\n\n    const projectId = this.props.match.params.id;\n    let project = (await apiProjectGet(this.props.serviceUrl, projectId)).data;\n\n    if (!project) {\n      console.error('Unable to retrieve projectId ', projectId);\n      project = {};\n    }\n\n    this.setState({\n      project: project,\n      loading: false,\n    });\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    if (this.state.type === '') {\n      formIsValid = false;\n      invalid['type'] = true;\n    }\n\n    if (this.state.summary === '') {\n      formIsValid = false;\n      invalid['summary'] = true;\n    }\n\n    if (this.state.description === '') {\n      formIsValid = false;\n      invalid['description'] = true;\n    }\n\n    if (this.state.priority === '') {\n      formIsValid = false;\n      invalid['priority'] = true;\n    }\n\n    this.setState({\n      invalid: invalid,\n    });\n    return formIsValid;\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const subscription = getActiveSubscription(this.state.project);\n      if (subscription) {\n        this.createTicket()\n          .then(() => {\n            this.setState({\n              submitMsg: i18n.t('submitMessages.created'),\n              submitColour: '#24a148',\n            });\n          })\n          .catch(() => {\n            this.setState({\n              submitMsg: i18n.t('submitMessages.ticketError'),\n              submitColour: '#da1e28',\n            });\n          });\n      }\n      // if no subscriptions, don't create ticket\n      else {\n        this.setState({\n          submitMsg: i18n.t('submitMessages.subscriptionRequired'),\n          submitColour: '#da1e28',\n        });\n      }\n    } else {\n      this.setState({\n        submitMsg: i18n.t('submitMessages.error'),\n        submitColour: '#da1e28',\n      });\n    }\n  };\n\n  async createTicket() {\n    if (isPortalUser()) {\n      const ticket = {\n        type: this.state.type,\n        summary: this.state.summary,\n        description: this.state.description,\n        priority: this.state.priority,\n        // these fields are just placeholders to validate the POST request (fields will be set in the backend)\n        systemId: '999',\n        status: 'To Do',\n        createDate: '2021-02-22T14:14:09-05:00',\n        updateDate: '2021-02-22T14:14:09-05:00',\n      };\n      return await apiJiraTicketPost(this.props.serviceUrl, this.state.project.id, ticket);\n    }\n  }\n\n  render() {\n    if (!this.state.loading) {\n      if (isPortalUser()) {\n        return (\n          <div id=\"entando-customer-portal\">\n            <Breadcrumbs project={this.state.project} locale={this.props.locale}/>\n            <div className=\"form-container\">\n              <p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>\n              <Form onSubmit={this.handleFormSubmit}>\n                <div className=\"bx--grid\">\n                  <div className=\"bx--row\" style={{padding: '1em 0'}}>\n                    <div className=\"bx--col\">\n                      <div className=\"form-desc\">\n                        <h4>{i18n.t('supportTicketForm.formTitle')}</h4>\n                        <div>{i18n.t('supportTicketForm.desc')}</div>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"bx--row\">\n                    <div className=\"bx--col\">\n                      <div>\n                        <strong>{i18n.t('projectDetails.project')}:</strong> {this.state.project.name}\n                      </div>\n                      <Select\n                        id=\"type\"\n                        name=\"type\"\n                        labelText={i18n.t('supportTicketForm.type') + ' *'}\n                        value={this.state.type}\n                        onChange={this.handleChanges}\n                        invalidText={i18n.t('validation.invalid.required')}\n                        invalid={this.state.invalid['type']}\n                      >\n                        {this.types.map((type, i) => (\n                          <SelectItem key={i} text={type} value={type}>\n                            {type}\n                          </SelectItem>\n                        ))}\n                      </Select>\n                      <Select\n                        id=\"priority\"\n                        name=\"priority\"\n                        labelText={i18n.t('supportTicketForm.priority') + ' *'}\n                        value={this.state.priority}\n                        onChange={this.handleChanges}\n                        invalidText={i18n.t('validation.invalid.required')}\n                        invalid={this.state.invalid['priority']}\n                      >\n                        {this.priorities.map((priority, i) => (\n                          <SelectItem key={i} text={priority} value={priority}>\n                            {priority}\n                          </SelectItem>\n                        ))}\n                      </Select>\n                    </div>\n                  </div>\n                  <div className=\"bx--row\">\n                    <div className=\"bx--col\">\n                      <TextInput\n                        labelText={i18n.t('supportTicketForm.ticketSummary') + ' *'}\n                        placeholder={i18n.t('supportTicketForm.addticketSummary')}\n                        id=\"summary\"\n                        name=\"summary\"\n                        value={this.state.summary}\n                        onChange={this.handleChanges}\n                        invalidText={i18n.t('validation.invalid.required')}\n                        invalid={this.state.invalid['summary']}\n                      />\n                    </div>\n                  </div>\n                  <div className=\"bx--row\">\n                    <div className=\"bx--col\">\n                      <TextArea\n                        labelText={i18n.t('supportTicketForm.ticketDescription') + ' *'}\n                        placeholder={i18n.t('supportTicketForm.addticketDescription')}\n                        name=\"description\"\n                        value={this.state.description}\n                        onChange={this.handleChanges}\n                        invalidText={i18n.t('validation.invalid.required')}\n                        invalid={this.state.invalid['description']}\n                      />\n                      <Button kind=\"primary\" tabIndex={0} type=\"submit\">\n                        {' '}\n                        {i18n.t('buttons.submit')}{' '}\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              </Form>\n            </div>\n          </div>\n        );\n      } else {\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\n      }\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default withKeycloak(OpenTicketForm);\n","import { getDefaultOptions, request, getUrl } from './helpers';\n\nconst resource = 'api/portal-users';\n\nexport const apiUserDelete = async (serviceUrl, id) => {\n  const url = `${serviceUrl}/${resource}/${id}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return await request(url, options);\n};\n\nexport const apiUsersPut = async (serviceUrl, user) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'PUT',\n    body: user ? JSON.stringify(user) : null,\n  };\n  return await request(url, options);\n};\n\nexport const apiUsersGet = async serviceUrl => {\n  const url = getUrl(`${serviceUrl}/${resource}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return await request(url, options);\n};\n\nexport const apiUserGet = async (serviceUrl, userId) => {\n  const url = getUrl(`${serviceUrl}/${resource}/${userId}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return await request(url, options);\n};\n\nexport const apiUserPost = async (serviceUrl, user) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n    body: user ? JSON.stringify(user) : null,\n  };\n  return await request(url, options);\n};\n\nexport const apiUserGetByUsernameAndEmail = async (serviceUrl, username, email) => {\n  const url = getUrl(`${serviceUrl}/${resource}/username/${username}/email/${email}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return await request(url, options);\n};\n","import { getDefaultKeycloakOptions, request, getUrl } from './helpers';\n\nexport const apiKeycloakUserGet = async (serviceUrl, realm) => {\n  const usersResource = `admin/realms/${realm}/users`;\n  const url = `${serviceUrl}/${usersResource}`;\n  const options = {\n    ...getDefaultKeycloakOptions(),\n    method: 'GET',\n  };\n  return await request(url, options);\n};\n\nexport const apiKeycloakToken = async (serviceUrl, realm) => {\n  const tokenResource = `realms/${realm}/protocol/openid-connect/token`;\n  const url = getUrl(`${serviceUrl}/${tokenResource}`);\n  const keycloakBody = {\n    client_id: 'web_app',\n    username: 'admin',\n    password: 'admin',\n    grant_type: 'password',\n  };\n  const options = {\n    ...getDefaultKeycloakOptions(),\n    method: 'POST',\n    body: keycloakBody ? serialize(keycloakBody) : null,\n  };\n  return await request(url, options);\n};\n\nfunction serialize(obj) {\n  var str = [];\n  for (var p in obj)\n    if (obj.hasOwnProperty(p)) {\n      str.push(encodeURIComponent(p) + '=' + encodeURIComponent(obj[p]));\n    }\n  return str.join('&');\n}\n","import React, { Component } from 'react';\nimport { Form, Select, SelectItem, Button } from 'carbon-components-react';\nimport * as portalUserApi from '../../../api/portalusers';\nimport {apiAddUserToProject, apiProjectGet} from '../../../api/projects';\nimport withKeycloak from '../../../auth/withKeycloak';\nimport { apiKeycloakUserGet } from '../../../api/keycloak';\nimport i18n from '../../../i18n';\nimport {authenticationChanged, isAuthenticated} from \"../../../api/helpers\";\nclass AssignUsers extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      project: null,\n      projectId: '',\n      assignUser: '',\n      users: new Map(),\n      invalid: {},\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.fetchData();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.fetchData();\n    }\n  }\n\n  async fetchData() {\n    const {keycloak} = this.props;\n    const users = this.mapKeycloakUserEmails((await apiKeycloakUserGet(keycloak.authServerUrl, keycloak.realm)).data);\n    let projectId = this.props.match.params.id;\n    let project = null;\n    if (projectId != null) {\n      project = (await apiProjectGet(this.props.serviceUrl, projectId)).data;\n    } else {\n      projectId = '';\n    }\n\n    this.setState({\n      projectId: projectId,\n      project: project,\n      users: users,\n    });\n  }\n\n  mapKeycloakUserEmails = keycloakUsers => {\n    const usernameEmailMap = new Map();\n    keycloakUsers.forEach(keycloakUser => usernameEmailMap.set(keycloakUser.username, keycloakUser.email));\n    return usernameEmailMap;\n  };\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    const { projectId, assignUser } = this.state;\n    const formIsValid = this.handleFormValidation();\n\n    if (formIsValid) {\n      this.assignUserToProject(projectId, assignUser).then(res => {\n        if (res && res.status === 201) {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.updated'),\n            submitColour: '#24a148',\n          });\n          window.dispatchEvent(new CustomEvent('cp-user-assigned'));\n        } else {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        }\n      });\n    }\n  };\n\n  handleFormValidation() {\n    let invalid = {};\n    let formIsValid = true;\n    const { projectId, assignUser } = this.state;\n\n    //name\n    if (projectId === '') {\n      formIsValid = false;\n      invalid['projectId'] = true;\n    }\n\n    //customerNumber\n    if (assignUser === '') {\n      formIsValid = false;\n      invalid['assignUser'] = true;\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  assignUserToProject = async (projectId, username) => {\n    const email = this.state.users.get(username);\n    if (!email) {\n      alert(\"User is missing an email address in keycloak and cannot be assigned.\")\n      return null;\n    }\n    const portalUserId = await this.getPortalUserId({username, email: this.state.users.get(username)});\n    return await apiAddUserToProject(this.props.serviceUrl, projectId, portalUserId);\n  };\n\n  getPortalUserId = async keycloakUser => {\n    let portalUserId = null;\n    try {\n      const portalUser = await portalUserApi.apiUserGetByUsernameAndEmail(this.props.serviceUrl,\n        keycloakUser.username, keycloakUser.email);\n      portalUserId = portalUser.data.id;\n    } catch (e) {\n      console.warn(e);\n    }\n\n    return portalUserId;\n  };\n\n  setupFormComponents() {\n    const users = this.state.users;\n    const project = this.state.project;\n    let userList;\n    let projectList;\n\n    if (users.size > 0) {\n      userList = [...users.keys()].map((assignUser, i) => (\n        <SelectItem key={i} text={assignUser} value={assignUser}>\n          {assignUser}\n        </SelectItem>\n      ));\n      userList.unshift(<SelectItem key=\"-1\" text={i18n.t('manageUsers.assign.userList')} value=\"\"/>);\n    } else {\n      userList = <SelectItem text={i18n.t('manageUsers.assign.noUsers')} value=\"\"/>;\n    }\n\n    if (project != null) {\n      projectList = <SelectItem key={project.id} text={project.name} value={project.id}/>;\n    } else {\n      projectList = <SelectItem text={i18n.t('manageUsers.assign.noProjects')} value=\"\"/>;\n    }\n\n    return {userList, projectList};\n  }\n\n  render() {\n    const { userList, projectList } = this.setupFormComponents();\n\n    return (\n      <div>\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\n        <Form onSubmit={this.handleFormSubmit}>\n          <div className=\"bx--grid\">\n            <div className=\"bx--row\">\n              <div className=\"bx--col\">\n                <Select\n                  id=\"projectId\"\n                  name=\"projectId\"\n                  labelText={i18n.t('manageUsers.assign.projectName')}\n                  value={this.state.projectId}\n                  onChange={this.handleChanges}\n                  invalidText={i18n.t('validation.invalid.required')}\n                  invalid={this.state.invalid['projectId']}\n                >\n                  {projectList}\n                </Select>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--col\">\n                <Select\n                  id=\"assignUser\"\n                  name=\"assignUser\"\n                  labelText={i18n.t('manageUsers.assign.assignUser')}\n                  value={this.state.assignUser}\n                  onChange={this.handleChanges}\n                  invalidText={i18n.t('validation.invalid.required')}\n                  invalid={this.state.invalid['assignUser']}\n                >\n                  {userList}\n                </Select>\n              </div>\n            </div>\n            <Button kind=\"primary\" tabIndex={0} type=\"submit\">\n              {' '}\n              {i18n.t('buttons.submit')}{' '}\n            </Button>\n          </div>\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default withKeycloak(AssignUsers);\n","import React, {Component} from 'react';\nimport {\n  DataTable,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableHeader,\n  TableBody,\n  TableCell,\n  Button\n} from 'carbon-components-react';\nimport withKeycloak from '../../../auth/withKeycloak';\nimport i18n from '../../../i18n';\nimport {apiGetProjectUsers, apiDeleteUserFromProject} from '../../../api/projects';\nimport {authenticationChanged, isAuthenticated} from \"../../../api/helpers\";\n\nclass DeleteUsers extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      users: [],\n      displayUsers: [],\n      projectId: '',\n    };\n    this.headerData = [\n      {\n        header: i18n.t('manageUsers.delete.userName'),\n        key: 'username',\n      },\n      {\n        header: i18n.t('manageUsers.delete.userEmail'),\n        key: 'email',\n      },\n      {\n        header: i18n.t('manageUsers.delete.userAccess'),\n        key: 'userAccess',\n      },\n    ];\n    window.addEventListener('cp-user-assigned', event => {\n      this.fetchData();\n    });\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.fetchData();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.fetchData();\n    }\n  }\n\n  async fetchData() {\n    if (isAuthenticated(this.props)) {\n      const projectId = this.props.match.params.id;\n      let users = [];\n      if (projectId != null) {\n        users = (await apiGetProjectUsers(this.props.serviceUrl, projectId)).data;\n      }\n\n      this.setState({\n        users,\n        projectId,\n      });\n\n      this.handleUserDisplay();\n    }\n  }\n\n  handleUserDisplay() {\n    const users = this.state.users;\n    const projectId = this.state.projectId;\n\n    const displayUsers = users.map(user => ({\n      id: user.username,\n      username: user.username,\n      email: user.email,\n      userAccess: (\n        <Button kind=\"ghost\" onClick={event => this.handleRemoveUser(user.id, projectId, event)}\n                className=\"button-warning\">\n          {i18n.t('manageUsers.delete.removeUser')}\n        </Button>\n      ),\n    }));\n\n    this.setState({\n      displayUsers,\n    });\n  }\n\n  handleRemoveUser = (userId, projectId, event) => {\n    event.preventDefault();\n\n    apiDeleteUserFromProject(this.props.serviceUrl, projectId, userId).then(res => {\n      if (res.status === 201) {\n        this.fetchData();\n      } else {\n        console.warn('Failed to delete user', res);\n      }\n    });\n  };\n\n  render() {\n    return (\n      <DataTable rows={this.state.displayUsers} headers={this.headerData}>\n        {({ rows, headers, getHeaderProps, getTableProps }) => (\n          <TableContainer>\n            <Table {...getTableProps()}>\n              <TableHead>\n                <TableRow>\n                  {headers.map(header => (\n                    <TableHeader {...getHeaderProps({ header })}>{header.header}</TableHeader>\n                  ))}\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {rows.map(row => (\n                  <TableRow key={row.id}>\n                    {row.cells.map(cell => (\n                      <TableCell key={cell.id}>{cell.value}</TableCell>\n                    ))}\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        )}\n      </DataTable>\n    );\n  }\n}\n\nexport default withKeycloak(DeleteUsers);\n","import React, {Component} from 'react';\nimport i18n from '../../../i18n';\nimport {Accordion, AccordionItem} from 'carbon-components-react';\nimport AssignUsers from './AssignUsers';\nimport DeleteUsers from './DeleteUsers';\nimport {authenticationChanged, isAuthenticated, isPortalAdmin} from '../../../api/helpers';\nimport withKeycloak from '../../../auth/withKeycloak';\nimport Breadcrumbs from \"../../Breadcrumbs/Breadcrumbs\";\n\nclass ManageUsers extends Component {\n  userFunctionality;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n    };\n    this.userFunctionality = [\n      {\n        label: (\n          <div>\n            <p className=\"title\">{i18n.t('manageUsers.manage.title')}</p>\n            <p className=\"desc\">{i18n.t('manageUsers.manage.desc')}</p>\n          </div>\n        ),\n        content: <DeleteUsers {...props} serviceUrl={this.props.serviceUrl}/>,\n        open: true,\n      },\n      {\n        label: (\n          <div>\n            <p className=\"title\">{i18n.t('manageUsers.assign.title')}</p>\n            <p className=\"desc\">{i18n.t('manageUsers.assign.desc')}</p>\n          </div>\n        ),\n        content: <AssignUsers {...props} serviceUrl={this.props.serviceUrl}/>,\n        open: true,\n      },\n    ];\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  render() {\n    if (!this.state.loading) {\n      if (isPortalAdmin()) {\n        return (\n          <div id=\"entando-customer-portal\">\n            <Breadcrumbs locale={this.props.locale}/>\n            <div className=\"form-container\">\n              <Accordion>\n                {this.userFunctionality.map((item, index) => (\n                  <AccordionItem key={index.toString()} index={index} title={item.label} description={item.description}\n                                 open={item.open}>\n                    {item.content}\n                  </AccordionItem>\n                ))}\n              </Accordion>\n            </div>\n          </div>\n        );\n      }\n      // Unauthorized\n      else {\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\n      }\n    }\n    // Loading\n    else {\n      return null;\n    }\n  }\n}\n\nexport default withKeycloak(ManageUsers);\n","import React, {Component} from 'react';\nimport {HashRouter, Route, Switch} from 'react-router-dom';\nimport AdminDashboard from './Admin/AdminDashboard';\nimport Subscription from './SubscriptionDetails/Subscription';\nimport withKeycloak from '../auth/withKeycloak';\nimport {AuthenticatedView, UnauthenticatedView} from '../auth/KeycloakViews';\nimport {authenticationChanged, isAuthenticated, isPortalUser} from '../api/helpers';\nimport CustomerProjectList from './Customer/CustomerProjectList';\nimport i18n from '../i18n';\nimport ManageSubscriptions from './Admin/ManageSubscriptions/ManageSubscriptions';\nimport SubscriptionForm from './Forms/SubscriptionForm';\nimport OpenTicketForm from './Forms/OpenTicketForm';\nimport ManageUsers from './Admin/ManageUsers/ManageUsers';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n    };\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  render() {\n    var { keycloak } = this.props;\n\n    if (!this.state.loading) {\n      if (isPortalUser()) {\n        return (\n          <div id=\"entando-customer-portal\">\n            <AuthenticatedView keycloak={keycloak}>\n              <HashRouter>\n                <Switch>\n                  <Route\n                    path={'**/customer-details/:id'}\n                    render={props => <CustomerProjectList {...props} serviceUrl={this.props.serviceUrl}\n                                                          locale={this.props.locale}/>}\n                  />\n                  <Route\n                    path={'**/subscription/:projectId/:subscriptionId?'}\n                    render={props => <SubscriptionForm {...props} serviceUrl={this.props.serviceUrl}\n                                                       locale={this.props.locale}/>}\n                  />\n                  <Route\n                    path={'**/manage-subscriptions/:id'}\n                    render={props => <ManageSubscriptions {...props} serviceUrl={this.props.serviceUrl}\n                                                          locale={this.props.locale}/>}\n                  />\n                  <Route\n                    path={'**/manage-users/:id'}\n                    render={props => <ManageUsers {...props} serviceUrl={this.props.serviceUrl}\n                                                  locale={this.props.locale}/>}\n                  />\n                  <Route\n                    path={'**/subscription-details/:id'}\n                    render={props => <Subscription {...props} serviceUrl={this.props.serviceUrl}\n                                                   locale={this.props.locale}/>}\n                  />\n                  <Route\n                    path={'**/ticket/:id'}\n                    render={props => <OpenTicketForm {...props} serviceUrl={this.props.serviceUrl}\n                                                     locale={this.props.locale}/>}\n                  />\n                  <Route\n                    path=\"**/\"\n                    render={props => <AdminDashboard {...props} serviceUrl={this.props.serviceUrl}\n                                                     locale={this.props.locale}/>}\n                  />\n                </Switch>\n              </HashRouter>\n            </AuthenticatedView>\n            <UnauthenticatedView keycloak={keycloak}>\n              <p>{i18n.t('userMessages.unauthorized')}</p>\n            </UnauthenticatedView>\n          </div>\n        );\n      } else {\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\n      }\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default withKeycloak(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport '../index.scss';\nimport * as Locale from '../i18n';\n\nimport KeycloakContext from '../auth/KeycloakContext';\nimport App from '../components/App';\n\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\n\nconst getKeycloakInstance = () =>\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\n    initialized: false,\n  };\n\nconst ATTRIBUTES = {\n  hidden: 'hidden',\n  locale: 'locale',\n  paginationMode: 'pagination-mode',\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\n  serviceUrl: 'service-url',\n};\n\nclass AppElement extends HTMLElement {\n  container;\n\n  mountPoint;\n\n  unsubscribeFromKeycloakEvent;\n\n  keycloak = getKeycloakInstance();\n\n  connectedCallback() {\n    this.mountPoint = document.createElement('div');\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\n\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\n      this.render();\n    });\n\n    this.render();\n\n    //retargetEvents(shadowRoot);\n    this.appendChild(this.mountPoint);\n  }\n\n  render() {\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\n    Locale.setLocale(locale);\n\n    ReactDOM.render(\n      <KeycloakContext.Provider value={this.keycloak}>\n        <App serviceUrl={serviceUrl} locale={locale} />\n      </KeycloakContext.Provider>,\n      this.mountPoint\n    );\n  }\n}\n\ncustomElements.get('cp-app') || customElements.define('cp-app', AppElement);\n","import React, {Component} from 'react';\nimport {authenticationChanged, getPageUrl, isAuthenticated, isPortalUser} from \"../../api/helpers\";\nimport i18n from \"../../i18n\";\nimport withKeycloak from \"../../auth/withKeycloak\";\nimport {PAGE_CUSTOMER_PORTAL} from '../../api/constants';\n\nconst KEYCLOAK_EVENT_ID = 'keycloak';\n\nclass Login extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      loading: true\n    };\n    this.keycloakEventHandler = this.keycloakEventHandler.bind(this);\n  }\n\n  keycloakEventHandler(event) {\n    const keycloakEvent = event.detail.eventType;\n    const {keycloak} = this.props;\n    switch (keycloakEvent) {\n      //Wait until keycloak is ready before displaying the nav elements\n      case 'onReady':\n        this.setState({\n          loading: false\n        });\n        break;\n      case 'onAuthRefreshError':\n        keycloak.logout();\n        break;\n      default:\n        break;\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener(KEYCLOAK_EVENT_ID, this.keycloakEventHandler);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(KEYCLOAK_EVENT_ID, this.keycloakEventHandler);\n  }\n\n  render() {\n    const {keycloak} = this.props;\n    const loginUrl = window.location;\n    const handleLogin = () => keycloak.login({redirectUri: loginUrl});\n    const handleLogout = () => keycloak.logout({redirectUri: window.location.origin});\n\n    if (!this.state.loading) {\n      return (\n        <span className=\"entando-login\">\n          {!isAuthenticated(this.props) ? (\n            <>\n              <a className=\"log-in\" href=\"#entando-customer-portal\" onClick={handleLogin}\n                 title={i18n.t('userMessages.login')}>\n                {i18n.t('userMessages.login')}<i className=\"fas fa-sign-in-alt\"/>\n              </a>\n            </>\n          ) : (\n            <>\n              {isPortalUser() && (\n                <>\n                  <a\n                    href={getPageUrl(PAGE_CUSTOMER_PORTAL, this.props.locale)}>{i18n.t('customerDashboard.customerPortal')}</a>\n                  <span className=\"divider\">&nbsp;|&nbsp;</span>\n                </>\n              )}\n              <a className=\"log-out\" href=\"#entando-customer-portal\" onClick={handleLogout}\n                 title={i18n.t('userMessages.logout')}>\n                {i18n.t('userMessages.logout')}<i className=\"fas fa-sign-out-alt\"/>\n              </a>\n            </>\n          )}\n        </span>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default withKeycloak(Login);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport '../index.scss';\n\nimport KeycloakContext from '../auth/KeycloakContext';\n\nimport {subscribeToWidgetEvent} from '../helpers/widgetEvents';\nimport {KEYCLOAK_EVENT_TYPE} from './widgetEventTypes';\nimport * as Locale from '../i18n';\nimport Login from '../components/Login/Login';\n\nconst getKeycloakInstance = () =>\n  (window && window.entando && window.entando.keycloak && {...window.entando.keycloak, initialized: true}) || {\n    initialized: false,\n  };\n\nconst ATTRIBUTES = {\n  hidden: 'hidden',\n  locale: 'locale',\n  paginationMode: 'pagination-mode',\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\n  serviceUrl: 'service-url',\n};\n\nclass LoginElement extends HTMLElement {\n  container;\n\n  mountPoint;\n\n  unsubscribeFromKeycloakEvent;\n\n  keycloak = getKeycloakInstance();\n\n  connectedCallback() {\n    this.mountPoint = document.createElement('span');\n    this.keycloak = {...getKeycloakInstance(), initialized: true};\n\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\n      this.keycloak = {...getKeycloakInstance(), initialized: true};\n      this.render();\n    });\n\n    this.render();\n\n    //retargetEvents(shadowRoot);\n    this.appendChild(this.mountPoint);\n  }\n\n  render() {\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\n    Locale.setLocale(locale);\n\n    ReactDOM.render(\n      <KeycloakContext.Provider value={this.keycloak}>\n        <Login serviceUrl={serviceUrl} locale={locale}/>\n      </KeycloakContext.Provider>,\n      this.mountPoint\n    );\n  }\n}\n\ncustomElements.get('cp-login') || customElements.define('cp-login', LoginElement);\n","import React, {Component} from 'react';\nimport {BrowserRouter, Route, Switch, Link} from 'react-router-dom';\nimport App from '../components/App';\nimport withKeycloak from '../auth/withKeycloak';\nimport AdminConfiguration from '../components/Admin/Configuration/AdminConfiguration';\nimport {authenticationChanged, getPageUrl, isAuthenticated, isPortalAdmin} from '../api/helpers';\nimport {\n  PAGE_ADMIN_CONFIG,\n  PAGE_CUSTOMER_PORTAL\n} from \"../api/constants\";\nimport Login from \"../components/Login/Login\";\n\nclass LocalApp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n    };\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  render() {\n    const {locale, serviceUrl} = this.props;\n    if (!this.state.loading) {\n      return (\n        <div>\n          <BrowserRouter forceRefresh={true}>\n            <Login locale={locale}/>\n            <div>\n              <ul>\n                {isPortalAdmin() && (\n                  <li>\n                    <Link to={getPageUrl(PAGE_ADMIN_CONFIG, locale)}>Admin sachin</Link>\n                  </li>\n                )}\n              </ul>\n            </div>\n            <Switch>\n              <Route path={getPageUrl(PAGE_ADMIN_CONFIG, locale)}>\n                <AdminConfiguration serviceUrl={serviceUrl} locale={locale}/>\n              </Route>\n              <Route path={getPageUrl(PAGE_CUSTOMER_PORTAL, locale)}>\n                <App serviceUrl={serviceUrl} locale={locale}/>\n              </Route>\n              <Route path=\"/\" exact={true}>\n                <App serviceUrl={serviceUrl} locale={locale}/>\n              </Route>\n            </Switch>\n          </BrowserRouter>\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default withKeycloak(LocalApp);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport '../index.scss';\n// import './entando.css';\nimport * as Locale from '../i18n';\n\nimport KeycloakContext from '../auth/KeycloakContext';\nimport LocalApp from '../local/LocalApp';\n\nimport {subscribeToWidgetEvent} from '../helpers/widgetEvents';\nimport {KEYCLOAK_EVENT_TYPE} from '../custom-elements/widgetEventTypes';\n\nconst getKeycloakInstance = () =>\n  (window && window.entando && window.entando.keycloak && {...window.entando.keycloak, initialized: true}) || {\n    initialized: false,\n  };\n\nconst ATTRIBUTES = {\n  hidden: 'hidden',\n  locale: 'locale',\n  paginationMode: 'pagination-mode',\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\n  serviceUrl: 'service-url',\n};\n\nclass LocalAppElement extends HTMLElement {\n  container;\n\n  mountPoint;\n\n  unsubscribeFromKeycloakEvent;\n\n  keycloak = getKeycloakInstance();\n\n  connectedCallback() {\n    this.mountPoint = document.createElement('div');\n    this.keycloak = {...getKeycloakInstance(), initialized: true};\n\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\n      this.keycloak = {...getKeycloakInstance(), initialized: true};\n      this.render();\n    });\n\n    this.render();\n\n    //retargetEvents(shadowRoot);\n    this.appendChild(this.mountPoint);\n  }\n\n  render() {\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\n    // debugger\n    const locale = this.getAttribute('ATTRIBUTES.locale') || '';\n    console.log('locale', locale);\n    Locale.setLocale(locale);\n\n    ReactDOM.render(\n      // entry point sachin\n      <KeycloakContext.Provider value={this.keycloak} id=\"sachinEntry\">\n        <LocalApp serviceUrl={serviceUrl} locale={locale} id=\"sachin\"/>\n      </KeycloakContext.Provider>,\n      this.mountPoint\n    );\n  }\n}\n\ncustomElements.get('cp-local-app') || customElements.define('cp-local-app', LocalAppElement);\n"],"sourceRoot":""}